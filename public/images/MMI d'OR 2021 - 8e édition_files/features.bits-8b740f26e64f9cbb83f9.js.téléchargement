(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{"+3jx":function(e,t,n){},"+Pj0":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("mrSG"),r=n("q1tI"),a=n("eirU"),o=n("bRfm"),s=n("cwzQ"),l=n("LYZ5");function c(e){return function(t){var n,c,d,u,m=Object(a.d)(l,{fetchPolicy:"network-only"}),p=m.loading,h=m.data;return Object(o.b)(window.navigator.userAgent).browser.isSafari()?null:p?r.createElement(s.a,null):r.createElement(e,Object(i.__assign)({isEligibleForRewardedVideo:!!(null===(c=null===(n=null==h?void 0:h.currentUser)||void 0===n?void 0:n.rewardedVideo)||void 0===c?void 0:c.isEligible),shouldCaptcha:!!(null===(u=null===(d=null==h?void 0:h.currentUser)||void 0===d?void 0:d.rewardedVideo)||void 0===u?void 0:u.shouldCaptcha)},t))}}},"0iXB":function(e,t,n){},"222m":function(e,t,n){},"3CMh":function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return b}));var i,r=n("TSYQ"),a=n("q1tI"),o=n("ANjH"),s=n("/7QA"),l=n("bBAb"),c=n("5zXJ"),d=n("XmgI"),u=n("4h+t"),m=n("ikJD"),p=n("x1M1"),h=n("Yegi"),f=n("IyK4");n("0iXB");!function(e){e[e.Large=4]="Large",e[e.Medium=3]="Medium",e[e.Small=2]="Small",e[e.ExtraSmall=1.5]="ExtraSmall",e[e.ExtremelySmall=1]="ExtremelySmall"}(i||(i={}));var b=Object(o.d)(Object(l.b)((function(e){return{bitsConfig:e.bitsConfig}})))((function(e){var t,n=Object(a.useContext)(m.b).value,o=e.bitsConfig&&e.bitsConfig.indexedActions[e.prefix.toLowerCase()];o||(o=Object(u.b)("Cheer"));var l=e.amount||c.l,b=o.orderedTiers.find((function(e){return e.bits<=l}));b||(b=o.orderedTiers[0]);var g=null===(t=e.bitsConfig)||void 0===t?void 0:t.tiers.find((function(e){return e.bits<=l}));g||(g=e.bitsConfig.tiers[0]);var C=e.display===h.h.Inline||e.display===h.h.InlineFlex||e.display===h.h.InlineBlock,v=null,k=r("cheermote-for-amount__cheer-amount",{"cheermote-for-amount__display--table-cell":!C},{"cheermote-for-amount__cheer-amount--medium":e.size===i.Medium},{"cheermote-for-amount__cheer-amount--small":e.size===i.Small||e.size===i.ExtraSmall},{"cheermote-for-amount__cheer-amount--extremely-small":e.size===i.ExtremelySmall});if(void 0!==e.amount&&e.showAmount){var E=e.formattedNumber?Object(s.f)(e.amount):e.amount;v=a.createElement(f.a,{padding:e.size===i.Small?0:void 0,textAlign:e.size===i.Small?h.q.Center:void 0},a.createElement("strong",{className:k,style:{color:g.color}},E))}var y=r("cheermote-for-amount__cheer-image",{"cheermote-for-amount__display--table-cell":!C},{"cheermote-for-amount__cheer--inline":C},{"cheermote-for-amount__cheer-image--small":e.size===i.Small},{"cheermote-for-amount__cheer-image--extra-small":e.size===i.ExtraSmall},{"cheermote-for-amount__cheer-image--extremely-small":e.size===i.ExtremelySmall}),B=a.createElement(p.a,{className:y,sources:Object(d.d)(o,b.bits,e.size||i.Large,n&&e.animated)});return e.showImage||(B=null),a.createElement(f.a,{className:"cheermote-for-amount",alignItems:e.alignItems,display:e.display},a.createElement("span",null,B,v))}))},"5Czc":function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"bitsUserSettings"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"BitsUserSettings"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"firstCheerTutorial"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasAbandoned"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"hasSkipped"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:96}};n.loc.source={body:"fragment bitsUserSettings on BitsUserSettings {\nfirstCheerTutorial {\nhasAbandoned\nhasSkipped\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"5cw2":function(e,t,n){},"7APm":function(e,t,n){},"8BsE":function(e,t,n){},"8nkl":function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"SetBitsUserSettings"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"SetBitsUserSettingsInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"setBitsUserSettings"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bitsUserSettings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"bitsUserSettings"},directives:[]}]}}]}}]}}]}}],loc:{start:0,end:237}};i.loc.source={body:'#import "twilight/features/bits/models/bits-user-settings-fragment.gql"\nmutation SetBitsUserSettings($input: SetBitsUserSettingsInput!){\nsetBitsUserSettings(input: $input) {\ncurrentUser {\nid\nbitsUserSettings {\n...bitsUserSettings\n}\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};i.definitions=i.definitions.concat(n("5Czc").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!r[t]&&(r[t]=!0,!0)})));var a={};function o(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}i.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),a[e.name.value]=t}})),e.exports=i,e.exports.SetBitsUserSettings=function(e,t){var n={kind:e.kind,definitions:[o(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var i=a[t]||new Set,r=new Set,s=new Set;for(i.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){r.has(e)||(r.add(e),(a[e]||new Set).forEach((function(e){s.add(e)})))}))}return r.forEach((function(t){var i=o(e,t);i&&n.definitions.push(i)})),n}(i,"SetBitsUserSettings")},"Aa/l":function(e,t,n){},AcdH:function(e,t,n){},BrgZ:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"WatchAdModal_CreateRewardedVideoToken"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"CreateRewardedVideoTokenInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"createRewardedVideoToken"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:138}};n.loc.source={body:"mutation WatchAdModal_CreateRewardedVideoToken($input:CreateRewardedVideoTokenInput!) {\ncreateRewardedVideoToken(input:$input) {\ntoken\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function r(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.WatchAdModal_CreateRewardedVideoToken=function(e,t){var n={kind:e.kind,definitions:[r(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var a=i[t]||new Set,o=new Set,s=new Set;for(a.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=r(e,t);i&&n.definitions.push(i)})),n}(n,"WatchAdModal_CreateRewardedVideoToken")},ECxT:function(e,t,n){},"FZ/2":function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var i,r=n("/MKj"),a=n("XDQu"),o=n("mrSG"),s=n("q1tI"),l=n("/7QA"),c=n("/0dD"),d=n("5zXJ"),u=n("ebRM"),m=n("RiD7"),p=n("OCDW"),h=n("Yegi"),f=n("uq9l"),b=n("JjwZ"),g=n("5e0Q");n("UrjJ");!function(e){e.PromoSection="spring-sale-promo",e.PromoDetails="promo-details",e.PromoButton="promo-button"}(i||(i={}));var C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handlePromoBuy=function(){var e=Object(u.b)({trackBitsCardInteraction:t.props.trackBitsCardInteraction,channelID:t.props.channelID,trackingID:t.props.trackingID,checkoutID:t.props.checkoutID,purchaseUrl:t.props.offer.url,bitsAmount:t.props.offer.bits,location:m.d.ChatTooltip});e&&t.props.onPromoBuyClose(e)},t}return Object(o.__extends)(t,e),t.prototype.render=function(){var e="",t="";return this.props.isBitsCard?(t=d.g+"/spring-sale-2019/BitsCard_Cheermotes.png",e="spring-sale-promo-light-bits-card",this.props.theme===c.a.Dark&&(e="spring-sale-promo-dark-bits-card")):(t=d.g+"/spring-sale-2019/GetBitsBtn_Cheermotes.png",e="spring-sale-promo-light-buy-card",this.props.theme===c.a.Dark&&(e="spring-sale-promo-dark-buy-card")),s.createElement(p.a,{className:e,"data-test-selector":i.PromoSection,display:h.h.Flex,flexGrow:1,flexDirection:h.i.Column,justifyContent:h.m.Center,alignItems:h.b.Center,padding:1,borderRadius:{topLeft:h.e.Large,topRight:h.e.Large}},s.createElement(p.a,{padding:{bottom:1}},s.createElement(f.a,{fontSize:h.k.Size4,bold:!0},Object(l.d)("Limited Time Offer!","Bits--SpringSaleIntro"))),s.createElement(b.a,{src:t,alt:Object(l.d)("Spring Sale Cheermotes","Bits--SpringSaleIntro")}),s.createElement(p.a,{padding:{top:1,left:5,right:5},textAlign:h.q.Center},s.createElement(f.a,{"data-test-selector":i.PromoDetails},Object(l.d)("From now through {date}, get {bitsAmount} Bits for {price}.",{date:Object(l.c)(new Date("2019-03-31T23:59:59Z"),{month:"numeric",day:"numeric"}),bitsAmount:this.props.offer.bits,price:Object(l.f)(this.props.offer.amount,{style:"currency",currency:this.props.offer.currencyCode})},"Bits--SpringSaleIntro"))),s.createElement(p.a,{padding:{top:1,bottom:1}},s.createElement(g.a,{"data-test-selector":i.PromoButton,onClick:this.handlePromoBuy},Object(l.d)("Purchase {bitsAmount} Bits",{bitsAmount:this.props.offer.bits},"Bits--SpringSaleIntro"))),s.createElement(p.a,{textAlign:h.q.Center},s.createElement(f.a,{fontSize:h.k.Size7},Object(l.d)("Limit one purchase per customer.","Bits--SpringSaleIntro"))))},t}(s.Component);var v=Object(r.b)((function(e){return{theme:Object(a.a)(e)}}))(C)},Gcqi:function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"BitsCard_Bits"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bitsBalance"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bitsUserState"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bitsUserSettings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"bitsUserSettings"},directives:[]}]}}]}}]}}],loc:{start:0,end:187}};i.loc.source={body:'#import "twilight/features/bits/models/bits-user-settings-fragment.gql"\nquery BitsCard_Bits {\ncurrentUser {\nid\nbitsBalance\nlogin\nbitsUserState\nbitsUserSettings {\n...bitsUserSettings\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};i.definitions=i.definitions.concat(n("5Czc").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!r[t]&&(r[t]=!0,!0)})));var a={};function o(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}i.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),a[e.name.value]=t}})),e.exports=i,e.exports.BitsCard_Bits=function(e,t){var n={kind:e.kind,definitions:[o(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var i=a[t]||new Set,r=new Set,s=new Set;for(i.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){r.has(e)||(r.add(e),(a[e]||new Set).forEach((function(e){s.add(e)})))}))}return r.forEach((function(t){var i=o(e,t);i&&n.definitions.push(i)})),n}(i,"BitsCard_Bits")},H0r1:function(e,t,n){},KO0n:function(e,t,n){},LYZ5:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"RewardedVideoEligibility"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"rewardedVideo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isEligible"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"shouldCaptcha"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:96}};n.loc.source={body:"query RewardedVideoEligibility {\ncurrentUser {\nid\nrewardedVideo {\nisEligible\nshouldCaptcha\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function r(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.RewardedVideoEligibility=function(e,t){var n={kind:e.kind,definitions:[r(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var a=i[t]||new Set,o=new Set,s=new Set;for(a.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=r(e,t);i&&n.definitions.push(i)})),n}(n,"RewardedVideoEligibility")},"MO/j":function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"BalanceFooter_BitsBadge"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"channelID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"bitsBadge"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"bitsBadge"},directives:[]}]}}]}}]}}]}}],loc:{start:0,end:178}};i.loc.source={body:'#import "twilight/features/bits/models/bits-badge-fragment.gql"\nquery BalanceFooter_BitsBadge($channelID: ID!) {\nuser(id: $channelID) {\nid\nself {\nbitsBadge {\n...bitsBadge\n}\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};i.definitions=i.definitions.concat(n("QYdK").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!r[t]&&(r[t]=!0,!0)})));var a={};function o(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}i.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),a[e.name.value]=t}})),e.exports=i,e.exports.BalanceFooter_BitsBadge=function(e,t){var n={kind:e.kind,definitions:[o(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var i=a[t]||new Set,r=new Set,s=new Set;for(i.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){r.has(e)||(r.add(e),(a[e]||new Set).forEach((function(e){s.add(e)})))}))}return r.forEach((function(t){var i=o(e,t);i&&n.definitions.push(i)})),n}(i,"BalanceFooter_BitsBadge")},NvZ5:function(e,t,n){},QYdK:function(e,t,n){var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"bitsBadge"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"UserSelfBitsBadge"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"totalBits"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nextBits"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"progress"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"current"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"badge"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"next"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"badge"},directives:[]}]}}]}}],loc:{start:0,end:174}};i.loc.source={body:'#import "twilight/features/badges/models/badge-fragment.gql"\nfragment bitsBadge on UserSelfBitsBadge {\nid\ntotalBits\nnextBits\nprogress\ncurrent {\n...badge\n}\nnext {\n...badge\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};i.definitions=i.definitions.concat(n("IKE4").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!r[t]&&(r[t]=!0,!0)}))),e.exports=i},SRov:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a}));var i;!function(e){e[e.Control=0]="Control",e[e.A=1]="A",e[e.B=2]="B",e[e.C=3]="C",e[e.D=4]="D"}(i||(i={}));var r=function(e){switch(e){case null:return i.Control;case"A":return i.A;case"B":return i.B;case"C":return i.C;case"D":return i.D;default:return i.Control}},a=function(e,t){if(t===i.Control||e.length<6)return e;var n=e.sort((function(e,t){return e.bitsOffer.bits-t.bitsOffer.bits}));switch(t){case i.A:return n.slice(0,3);case i.B:return n.slice(1,4);case i.C:return n.slice(2,5);case i.D:return n.slice(3,6);default:return e}}},UajW:function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"BitsCard_MainCard"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"withCheerBombEventEnabled"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bitsBalance"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bitsOffers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"bitsOffer"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"autoRefill"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"profiles"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"threshold"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"offerID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isEnabled"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cheer"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"settings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emoteMinimumBits"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cheerMinimumBits"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"event"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isCheerBombEventEnabled"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"withCheerBombEventEnabled"}}}]}]}]}}]}}]}}]}}],loc:{start:0,end:433}};i.loc.source={body:'#import "twilight/features/bits/models/bits-offer-fragment.gql"\nquery BitsCard_MainCard($name: ID! $withCheerBombEventEnabled: Boolean!) {\ncurrentUser {\nid\nbitsBalance\nlogin\nbitsOffers {\n...bitsOffer\n}\nautoRefill {\nprofiles {\nid\nthreshold\nofferID\nisEnabled\n}\n}\n}\nuser(id: $name) {\nid\ndisplayName\ncheer {\nid\nsettings {\nid\nemoteMinimumBits\ncheerMinimumBits\nevent\nisCheerBombEventEnabled @include(if: $withCheerBombEventEnabled)\n}\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};i.definitions=i.definitions.concat(n("wmIm").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!r[t]&&(r[t]=!0,!0)})));var a={};function o(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}i.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),a[e.name.value]=t}})),e.exports=i,e.exports.BitsCard_MainCard=function(e,t){var n={kind:e.kind,definitions:[o(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var i=a[t]||new Set,r=new Set,s=new Set;for(i.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){r.has(e)||(r.add(e),(a[e]||new Set).forEach((function(e){s.add(e)})))}))}return r.forEach((function(t){var i=o(e,t);i&&n.definitions.push(i)})),n}(i,"BitsCard_MainCard")},UqM8:function(e,t,n){var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"bitsBundleOffer"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"BitsBundleOffer"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bits"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"amount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"discount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isPromo"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"includesVAT"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"currencyCode"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"promotion"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"bitsBundleOfferPromotion"},directives:[]}]}}]}}],loc:{start:0,end:236}};i.loc.source={body:'#import "twilight/features/bits/models/bits-bundle-offer-promotion-fragment.gql"\nfragment bitsBundleOffer on BitsBundleOffer {\nid\ntype\nbits\namount\ndiscount\nisPromo\nurl\nincludesVAT\ncurrencyCode\npromotion {\n...bitsBundleOfferPromotion\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};i.definitions=i.definitions.concat(n("hRAX").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!r[t]&&(r[t]=!0,!0)}))),e.exports=i},UrjJ:function(e,t,n){},VR5Q:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"WatchAdModal_Redeeem"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"RedeemTrueXAdInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"redeemTrueXAd"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"grantedBits"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:105}};n.loc.source={body:"mutation WatchAdModal_Redeeem($input:RedeemTrueXAdInput!) {\nredeemTrueXAd(input:$input) {\ngrantedBits\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function r(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.WatchAdModal_Redeeem=function(e,t){var n={kind:e.kind,definitions:[r(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var a=i[t]||new Set,o=new Set,s=new Set;for(a.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=r(e,t);i&&n.definitions.push(i)})),n}(n,"WatchAdModal_Redeeem")},VeT4:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n("q1tI"),r=n("/7QA"),a=n("/0dD"),o=n("5zXJ"),s=n("XmgI"),l=n("4h+t"),c=n("x1M1");n("5cw2");function d(e){var t,n=Object(r.d)("{bitsAmount} Bits",{bitsAmount:e.count.toString()},"Bits--BitsCount");if(e.withImage){var d=e.bitsConfig&&e.bitsConfig.indexedActions[o.k];d||(d=Object(l.b)("Cheer"));var u=void 0;if(0===e.count)u=o.l;else for(var m=0,p=d.orderedTiers;m<p.length;m++){var h=p[m];if(h.bits<=e.count){u=h.bits;break}}if(u){var f=Object(s.d)(d,u,void 0,e.animated);return void 0!==e.themeOverride&&(e.themeOverride===a.a.Light?f.dark=f.light:f.light=f.dark),t=i.createElement(c.a,{className:"bits-count--img",sources:f}),i.createElement("strong",{className:"bits-count","data-a-target":"bits-count"},i.createElement("span",null,t," ",e.withText?n:""))}}return i.createElement("strong",{className:"bits-count","data-a-target":"bits-count"},i.createElement("span",null,n))}},Y18C:function(e,t,n){},Yr1V:function(e,t,n){},ZfCj:function(e,t,n){},ao1a:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return c})),n.d(t,"b",(function(){return d}));var i=n("wUQP"),r=n("DMoW"),a=n("4rCz"),o=function(e,t){return t===r.x.ACQUIRED&&function(e){var t=a.q.dynamicSettings.get("ruby_is_the_cutest_dog_ever",i.b.Off);return t===i.b.On||e&&t===i.b.StaffOnly}(e)},s=function(e){return e===r.x.NEW_USER},l=function(e,t){return!(!t||!t.firstCheerTutorial||t.firstCheerTutorial.hasSkipped||!s(e))},c=function(e,t){return!(!t||!t.firstCheerTutorial||t.firstCheerTutorial.hasAbandoned||t.firstCheerTutorial.hasSkipped||!s(e))},d=function(e,t,n){return!(!n||!n.firstCheerTutorial||n.firstCheerTutorial.hasSkipped||!o(e,t))}},bYOw:function(e,t,n){"use strict";n.d(t,"b",(function(){return O})),n.d(t,"a",(function(){return T}));var i,r=n("q1tI"),a=n("8/mp"),o=n("DMoW"),s=n("mrSG"),l=n("/MKj"),c=n("ANjH"),d=n("/7QA"),u=n("SDEh"),m=n("lB7/"),p=n("3CMh"),h=n("+Pj0"),f=n("RiD7"),b=n("OCDW"),g=n("Yegi"),C=n("5e0Q");!function(e){e.SubText="sub-text",e.Description="description"}(i||(i={}));var v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onWatchAdClick=function(){t.props.trackBitsCardInteraction(f.c.WatchAd),t.props.onWatchAdClick(t.props.shouldCaptcha)},t}return Object(s.__extends)(t,e),t.prototype.render=function(){var e=null;return this.props.isEligibleForRewardedVideo||(e=Object(d.d)("Try again later","Bits--WatchAdOffer")),r.createElement(b.a,{className:"bits-buy-card__offer-row",display:g.h.Flex,flexShrink:0,borderBottom:!0,justifyContent:g.m.Between,flexWrap:g.j.NoWrap,padding:{x:2,y:1}},r.createElement(b.a,{"data-test-selector":i.Description,padding:{right:4}},r.createElement("strong",null,Object(d.d)("Get {minBitsCount} or more Bits by watching short ads",{minBitsCount:this.props.minPayout},"Bits--WatchAdOffer"))),r.createElement(b.a,{flexShrink:0,display:g.h.Flex,flexDirection:g.i.Column,alignItems:g.b.End},r.createElement(C.a,{type:C.d.Secondary,"data-a-target":"bits-watch-ad",onClick:this.onWatchAdClick,disabled:!this.props.isEligibleForRewardedVideo},Object(d.d)("Watch Ad","Bits--WatchAdOffer")),e&&r.createElement(b.a,{"data-test-selector":i.SubText,className:"bits-buy-card__sub-text",alignSelf:g.c.Stretch,textAlign:g.q.Center,margin:{top:.5}},e)))},t}(r.Component),k=Object(h.a)(v),E=n("ebRM"),y=n("jNOR"),B=n("uq9l"),S=(n("byRF"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onBuyClick=function(){t.openBitsCheckout({forcePopup:!1})},t.onBuyClickExtraSmall=function(){t.openBitsCheckout({forcePopup:!0})},t.openBitsCheckout=function(e){var n=e.forcePopup||Object(u.d)(),i=t.props.channelID||"",r=t.props.offer,a=Object(E.b)({trackBitsCardInteraction:t.props.trackBitsCardInteraction,channelID:i,trackingID:t.props.trackingID,checkoutID:t.props.checkoutID,purchaseUrl:r.url,bitsAmount:r.bits,closeAllBits:t.props.closeAllBits,location:t.props.location,offerID:t.props.offer.id,checkoutFormDispatch:t.props.showCheckoutFormModal,forcePopup:n});a&&(t.props.onBuyPopupClose(a),t.props.onClose())},t}return Object(s.__extends)(t,e),t.prototype.render=function(){if(this.props.offer.type===o.t.AD)return this.props.channelLogin?r.createElement(k,{key:"wateb",minPayout:this.props.offer.bits,onWatchAdClick:this.props.handleWatchAdClick,trackBitsCardInteraction:this.props.trackBitsCardInteraction}):null;if(this.props.offer.type===o.t.BUNDLE){var e=this.props.offer,t=null;Object(E.c)(e)&&(t=r.createElement(b.a,{className:"bits-buy-card-offer-row__bonus-text bits-buy-card-offer-row__bonus-text-headline","data-test-selector":"first-time-promo-form",padding:{bottom:1}},r.createElement(B.a,{type:B.e.Strong,fontSize:g.k.Size6},Object(d.d)("Special Offer: 1st Time Buyers","Bits--BuyCard")))),Object(E.f)(e)&&(t=r.createElement(b.a,{className:"bits-buy-card-offer-row__bonus-text bits-buy-card-offer-row__bonus-text-headline","data-test-selector":"spring-sale-2019-promo-form",padding:{bottom:1}},r.createElement(B.a,{type:B.e.Strong,fontSize:g.k.Size6},Object(d.d)("Special Offer!","Bits--BuyCard"))));var n=null;e.discount&&(n=r.createElement(b.a,{className:"bits-buy-card-offer-row__sub-text","data-test-selector":"discount-subtext-form"},Object(d.d)("{percentOff,number,percent} discount",{percentOff:e.discount},"Bits--BuyCard")));var i=null;return(Object(E.c)(e)||Object(E.e)(e)||Object(E.f)(e))&&(i=r.createElement(b.a,{"data-test-selector":"one-per-account-form"},r.createElement(B.a,{color:g.f.Alt2},Object(d.d)("one per account","Bits--BuyCard")))),r.createElement(b.a,{className:"bits-buy-card-offer-row",flexShrink:0,display:g.h.Flex,justifyContent:g.m.Center,flexDirection:g.i.Column,padding:{x:2,y:1}},t,r.createElement(b.a,{display:g.h.Flex,justifyContent:g.m.Between,alignItems:g.b.Center},r.createElement(b.a,{flexGrow:1},r.createElement(B.a,{type:B.e.H5,color:g.f.Base,bold:!0},Object(d.d)("{bits} Bits",{bits:Object(d.f)(e.bits)},"Bits--BuyCard")),r.createElement(m.a,{bitsConfig:this.props.bitsConfig,amount:e.bits,size:p.b.ExtraSmall})),r.createElement(b.a,{flexShrink:0,display:g.h.Flex,flexDirection:g.i.Column,alignItems:g.b.End},r.createElement(b.a,{display:g.h.Hide,breakpointExtraSmall:{display:g.h.Block}},r.createElement(C.a,{onClick:this.onBuyClick,"data-a-target":"bits-purchase-button-"+e.bits},Object(d.f)(e.amount,{style:"currency",currency:e.currencyCode}))),r.createElement(b.a,{display:g.h.Block,breakpointExtraSmall:{display:g.h.Hide}},r.createElement(C.a,{onClick:this.onBuyClickExtraSmall,"data-a-target":"bits-purchase-button-xs-"+e.bits},Object(d.f)(e.amount,{style:"currency",currency:e.currencyCode}))),(n||i)&&r.createElement(b.a,{alignSelf:g.c.Stretch,textAlign:g.q.Right,margin:{top:.5}},n,i))))}return null},t}(r.Component));var O,N,w=Object(l.b)(null,(function(e){return Object(c.b)({showCheckoutFormModal:y.a},e)}))(S),A=function(e){return r.createElement(b.a,{display:g.h.Flex,flexDirection:g.i.Row,justifyContent:g.m.Center,padding:{bottom:1}},r.createElement(C.a,{type:C.d.Text,onClick:e.onClick},r.createElement(B.a,null,Object(d.d)("Show more","ShowMoreBitsOffers"))))},x=n("SRov"),I=n("gq8D"),D=n("Mg72");!function(e){e.Fullsize="full-size",e.Smallnoscroll="no-scroll--small",e.Scrollview="scroll-view"}(O||(O={})),function(e){e.BITS_OFFER_ROW="bits-offer-row"}(N||(N={}));var T=function(e){var t=Object(r.useState)(!1),n=t[0],i=t[1],s=Object(r.useRef)(null),l=e.trackBitsCardInteraction,c=e.location,d=e.skusReductionVariant,u=Object(r.useCallback)((function(){i(!0),d!==x.a.C&&d!==x.a.D||s.current&&s.current.scrollToTop(),l(f.c.BitsSkusExpShowMore,{actionType:f.a.Click,location:c})}),[d,l,c]),m=[],p=[],h=null;e.offers.forEach((function(t){var n=r.createElement(b.a,{key:t.id,borderTop:!0},r.createElement(w,{offer:t,bitsConfig:e.bitsConfig,channelID:e.channelID,trackingID:e.trackingID,checkoutID:e.checkoutID,channelLogin:e.channelLogin,currentUserSHA:e.currentUserSHA,location:e.location,onClose:e.onClose,onBuyPopupClose:e.onBuyPopupClose,handleWatchAdClick:e.handleWatchAdClick,closeAllBits:e.closeAllBits,trackBitsCardInteraction:e.trackBitsCardInteraction,showBitsTiers:e.location===f.d.GetBitsButtonTopNav})),i=Object(E.d)(t),a=Object(E.c)(t)||Object(E.f)(t),s=t.type===o.t.AD;a&&!e.hidePromos?m.push(n):i&&!a?m.push(n):s&&!e.hideWateb?h=n:s||i||p.push({bitsOffer:t,bitsOfferRow:n})}));var C=e.skusReductionVariant!==x.a.Control&&!n,v=C?Object(x.c)(p,e.skusReductionVariant||x.a.Control):p,k=r.createElement(I.a,{transitionType:D.d.Fade,duration:D.c.Long},v.map((function(e){return e.bitsOfferRow}))),y=C?r.createElement(A,{onClick:u}):null;switch(e.size){case O.Scrollview:return r.createElement(a.b,{ref:s},r.createElement(b.a,{flexGrow:1,flexWrap:g.j.NoWrap,display:g.h.Flex,flexDirection:g.i.Column},h,m,k,y));case O.Smallnoscroll:return r.createElement(b.a,{className:"bits-buy-card-offers__no-scroll--small",flexGrow:1,flexWrap:g.j.NoWrap,display:g.h.Flex,flexDirection:g.i.Column},h,m,k,y);default:return r.createElement(b.a,{className:"bits-buy-card-offers__full-size",flexGrow:1,flexWrap:g.j.NoWrap,display:g.h.Flex,flexDirection:g.i.Column,fullWidth:!0},h,m,k,y)}}},byRF:function(e,t,n){},"c+1r":function(e,t,n){},"dx/T":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n("q1tI"),r=n("/7QA"),a=n("5zXJ"),o=n("x1M1"),s=n("OCDW"),l=n("Yegi"),c=n("uq9l"),d=(n("222m"),{themed:!0,dark:{"1x":a.f+"/dark/animated/1/cheertutorial.gif"},light:{"1x":a.f+"/light/animated/1/cheertutorial.gif"}}),u=function(){return i.createElement(s.a,{display:l.h.Flex,padding:{top:5,bottom:3},flexGrow:1,flexDirection:l.i.Column,justifyContent:l.m.Center,alignItems:l.b.Center},i.createElement(c.a,{type:c.e.H4,bold:!0},i.createElement(o.a,{className:"cheermote-help__tutorial-image",sources:d}),Object(r.d)("How to Cheer","Bits--CheermoteHelp")),i.createElement(s.a,{padding:{x:3}},i.createElement(c.a,null,Object(r.d)('Type "cheer" + the number of Bits you want to Cheer.',"Bits--CheermoteHelp"))))}},ecb7:function(e,t,n){},hRAX:function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"bitsBundleOfferPromotion"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"BitsPromotion"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]}]}}],loc:{start:0,end:62}};n.loc.source={body:"fragment bitsBundleOfferPromotion on BitsPromotion {\nid\ntype\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},jNOR:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("ZS2+"),r=n("XDCx");function a(e){return function(t){t(Object(r.e)(i.a,{component:"CheckoutFormModal",loader:function(){return Promise.all([n.e(0),n.e(85)]).then(n.bind(null,"Ukpy"))},componentProps:e}))}}},"lB7/":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("q1tI"),r=n("3CMh"),a=n("5zXJ"),o=n("4h+t"),s=n("OCDW"),l=n("Yegi");n("rAoL");function c(e){var t=(e.bitsConfig&&e.bitsConfig.indexedActions[a.k]||Object(o.b)("Cheer")).orderedTiers.filter((function(t){return t.bits<=e.amount})).reverse().map((function(t){return i.createElement(s.a,{display:l.h.Block,className:"bits-available-tiers__tier-bits-image",key:t.id},i.createElement(r.a,{size:e.size,amount:t.bits,prefix:a.k,showImage:!0,showAmount:!1,animated:!1}))}));return i.createElement(s.a,{display:l.h.Flex,padding:{y:.5},className:"bits-available-tiers__tier-bits-images"},t)}},mZsS:function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),function(e){e[e.Ready=0]="Ready",e[e.Dimensions=1]="Dimensions",e[e.RequestAd=2]="RequestAd",e[e.OnStart=3]="OnStart",e[e.OnCredit=4]="OnCredit",e[e.OnFinish=5]="OnFinish",e[e.OnClose=6]="OnClose",e[e.OnError=7]="OnError",e[e.Adblock=8]="Adblock",e[e.LimitReached=9]="LimitReached"}(i||(i={}))},opIq:function(e,t,n){"use strict";n.d(t,"a",(function(){return ue}));var i,r=n("/MKj"),a=n("XDCx"),o=n("YV3K"),s=n("kRBY"),l=n("mrSG"),c=n("q1tI"),d=n("ANjH"),u=n("/7QA"),m=n("cZKs"),p=n("atdg"),h=n("yR8l"),f=n("geRD"),b=n("ZS2+"),g=n("OCDW"),C=n("Yegi"),v=(n("+3jx"),b.a.wrap((function(){return n.e(62).then(n.bind(null,"koZt"))}),"FunCaptcha")),k=function(e){var t=e.onCaptchaComplete;return c.createElement(g.a,{alignItems:C.b.Center,display:C.h.Flex,justifyContent:C.m.Center,className:"wateb-funcaptcha-form__funcaptcha"},c.createElement(v,{onCaptchaComplete:t}))};!function(e){e[e.ExitEarly=0]="ExitEarly",e[e.Unknown=1]="Unknown",e[e.Adblock=2]="Adblock",e[e.LimitReached=3]="LimitReached"}(i||(i={}));var E=n("mZsS"),y=n("RiD7"),B=n("uq9l"),S=n("BrgZ"),O=n("VR5Q"),N=(n("yGGv"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={initializedFromProps:!1},t.hasAwarded=!1,t.checkCaptchaState=function(){return t.state.initializedFromProps||t.setState({needsCaptcha:t.props.needsCaptcha,initializedFromProps:!0}),t.state.needsCaptcha},t.onCaptchaComplete=function(){return t.setState({needsCaptcha:!1})},t.messageHandler=function(e){return Object(l.__awaiter)(t,void 0,void 0,(function(){var t,n,r,a,o,s,c,d,m,p,h;return Object(l.__generator)(this,(function(l){switch(l.label){case 0:if(e.origin!==window.location.origin)return[2];if(!(t=e.data)||"trueXAd"!==t.msgSrc)return[2];switch(t.type){case E.a.Ready:return[3,1];case E.a.RequestAd:return[3,6];case E.a.Dimensions:return[3,7];case E.a.OnStart:return[3,8];case E.a.OnCredit:return[3,9];case E.a.OnClose:case E.a.OnFinish:case E.a.LimitReached:case E.a.Adblock:case E.a.OnError:return[3,13]}return[3,14];case 1:n="",l.label=2;case 2:return l.trys.push([2,4,,5]),[4,this.props.createRewardedVideoToken(Object(f.a)({userID:this.props.userId}))];case 3:return s=l.sent(),n=(null===(m=s.data.createRewardedVideoToken)||void 0===m?void 0:m.token)||"",[3,5];case 4:return r=l.sent(),u.k.warn("Error creating truex client token",r),null===(h=(p=this.props).onError)||void 0===h||h.call(p,i.Unknown),[2];case 5:return n?(a={msgSrc:"wateb-ad-modal",hashedUserId:this.props.hashedUserId,token:n},e.source&&e.source.postMessage(a,"*"),[2]):[2];case 6:try{if(!(o=JSON.parse(t.activityJSON)))return[2];Object(y.k)({campaignID:o.campaign_id.toString(),requestID:t.requestID,requestMethod:this.props.requestRef})}catch(e){}return[2];case 7:return t.height&&t.width&&this.setState({customDimensions:{height:t.height,width:t.width}}),[3,14];case 8:try{if(!(o=JSON.parse(t.activityJSON)))return[2];Object(y.j)({requestID:t.requestID,adblock:!1,campaignID:o.campaign_id.toString()})}catch(e){}return[2];case 9:return l.trys.push([9,11,,12]),[4,this.props.redeemTrueXAd(Object(f.a)({args:t.engagement.signature_argument_string,signature:t.engagement.signature,trueXAd:{creativeID:t.engagement.ad.creative_id,campaignID:t.engagement.ad.campaign_id,name:t.engagement.ad.name,currencyAmount:t.engagement.ad.currency_amount},targetID:this.props.channelID}))];case 10:return s=l.sent(),null!==(c=s.data.redeemTrueXAd&&s.data.redeemTrueXAd.grantedBits)&&(this.hasAwarded=!0,this.props.onBitsAwarded&&this.props.onBitsAwarded(c)),[3,12];case 11:return d=l.sent(),u.k.warn("Error while redeeming bits for truex ad",d),this.props.onError&&this.props.onError(i.Unknown),[3,12];case 12:return[3,14];case 13:return this.props.onError&&(t.type===E.a.LimitReached?this.props.onError(i.LimitReached):t.type===E.a.Adblock?this.props.onError(i.Adblock):t.type===E.a.OnError?this.props.onError(i.Unknown):this.hasAwarded||this.props.onError(i.ExitEarly)),this.props.closeModal(),[3,14];case 14:return[2]}}))}))},t}return Object(l.__extends)(t,e),t.prototype.componentDidMount=function(){window.addEventListener("message",this.messageHandler)},t.prototype.componentWillUnmount=function(){window.removeEventListener("message",this.messageHandler)},t.prototype.render=function(){return c.createElement(g.a,{background:C.d.Base},c.createElement(g.a,{display:C.h.HideAccessible},c.createElement(B.a,{id:p.a},Object(u.d)("Watch Ad","Bits--WatchAdModal"))),c.createElement("div",{className:"t-watch-ads-modal",style:this.state.customDimensions},c.createElement(m.a,null),!this.checkCaptchaState()&&c.createElement("iframe",{src:"/products/bits/ad"}),this.checkCaptchaState()&&c.createElement(k,{onCaptchaComplete:this.onCaptchaComplete})))},t}(c.Component));var w,A=Object(d.d)(Object(r.b)(null,(function(e){return Object(d.b)({closeModal:a.d},e)})),Object(h.a)(O,{name:"redeemTrueXAd"}),Object(h.a)(S,{name:"createRewardedVideoToken"}))(N),x=n("TSYQ"),I=n("8/mp"),D=n("edgk"),T=n("DMoW"),j=n("jv9u"),_=n("bBAb"),F=n("+Pj0"),U=n("3CMh"),M=n("IyK4"),L=n("5e0Q");!function(e){e.Header="header",e.Description="description",e.StartCheering="start-cheering-button",e.WatchAd="watch-ad-button"}(w||(w={}));var P,H=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onWatchAnother=function(){t.props.trackBitsCardInteraction(y.c.WatchAnotherAd),t.props.onWatchAnother&&t.props.onWatchAnother()},t}return Object(l.__extends)(t,e),t.prototype.render=function(){return c.createElement(g.a,{display:C.h.Flex,flexGrow:1,flexDirection:C.i.Column,alignItems:C.b.Center,fullWidth:!0,flexWrap:C.j.NoWrap,padding:{y:1}},c.createElement(U.a,{prefix:"cheer",amount:this.props.amount,showAmount:!0,showImage:!0}),c.createElement(g.a,{display:C.h.Flex,padding:{top:1},flexGrow:1,flexDirection:C.i.Column,alignItems:C.b.Center,flexWrap:C.j.NoWrap},c.createElement(B.a,{"data-test-selector":w.Header,type:B.e.H4,bold:!0},Object(u.d)("You got {bitsAmount,number} Bits!",{bitsAmount:this.props.amount},"Bits--WatchAdAward")),c.createElement(M.a,{padding:{top:1}},c.createElement(B.a,{"data-test-selector":w.Description,color:C.f.Alt2},Object(u.d)("{bitsAmount,number} Bits were added to your Bit inventory.",{bitsAmount:this.props.amount},"Bits--WatchAdAward"),c.createElement("br",null),Object(u.d)("You can use these Bits to Cheer!","Bits--WatchAdAward")))),c.createElement(g.a,{display:C.h.Flex,padding:{x:1,top:3},alignSelf:C.c.Stretch,justifyContent:C.m.Between},c.createElement(L.a,{"data-test-selector":w.StartCheering,onClick:this.props.onStartCheering},Object(u.d)("Start Cheering","Bits--WatchAdAward")),c.createElement(L.a,{"data-test-selector":w.WatchAd,type:L.d.Secondary,"data-a-target":"bits-watch-another-ad",onClick:this.onWatchAnother,disabled:!this.props.isEligibleForRewardedVideo},Object(u.d)("Watch Another","Bits--WatchAdAward"))))},t}(c.Component),R=Object(F.a)(H),W=n("5zXJ");n("7APm");!function(e){e.Footer="footer",e.TryAgain="try-again-button",e.Close="close-button",e.Header="header",e.Description="description",e.Image="image"}(P||(P={}));var q=function(e){var t=Object(u.d)("Something's wrong!","Bits--WatchAdError"),n=Object(u.d)("Something went wrong. Wait a while and try again.","Bits--WatchAdError"),r="adserrorgeneric";switch(e.type){case i.Adblock:r="adserroradblock",n=Object(u.d)("We can't load this Ad, probably because Ad Blocking software is running. To watch an ad and get Bits, please disable all Ad Blocking software.","Bits--WatchAdError");break;case i.LimitReached:r="adserrorlimit",t=Object(u.d)("Ad Limit Reached","Bits--WatchAdError"),n=Object(u.d)("That's all the Ads we have for now. Try again tomorrow!","Bits--WatchAdError");break;case i.ExitEarly:n=Object(u.d)("To get Bits, you must view and interact with the Ad for the minimum amount of time.","Bits--WatchAdError")}var a=c.createElement(g.a,{"data-test-selector":P.Footer,className:"watch-ad-error__footer",display:C.h.Flex,padding:{top:2},alignSelf:C.c.Stretch,justifyContent:C.m.Center},c.createElement(L.a,{"data-test-selector":P.TryAgain,onClick:e.onTryAgain},Object(u.d)("Try Again","Bits--WatchAdError")));return e.type===i.LimitReached&&(a=c.createElement(g.a,{"data-test-selector":P.Footer,className:"watch-ad-error__footer",display:C.h.Flex,padding:{top:2},alignSelf:C.c.Stretch,justifyContent:C.m.Between},c.createElement(L.a,{"data-test-selector":P.Close,onClick:e.onClose},Object(u.d)("Got It","Bits--WatchAdError")),c.createElement(L.a,{"data-test-selector":P.TryAgain,onClick:e.onTryAgain,type:L.d.Secondary},Object(u.d)("Buy Bits","Bits--WatchAdError")))),c.createElement(g.a,{padding:{x:1},display:C.h.Flex,flexGrow:1,flexDirection:C.i.Column,alignItems:C.b.Center,fullWidth:!0,flexWrap:C.j.NoWrap},c.createElement(g.a,{padding:{y:2}},c.createElement("img",{"data-test-selector":P.Image,alt:"",className:"watch-ad-error__error-image",src:W.f+"/light/static/1/"+r+".png"})),c.createElement(g.a,{padding:{bottom:1}},c.createElement(B.a,{"data-test-selector":P.Header,type:B.e.H4,bold:!0},t)),c.createElement(B.a,{"data-test-selector":P.Description,color:C.f.Alt2},n),a)},V=n("lhih"),z=n("SRov"),G=n("GnwI"),Y=n("LNol"),Q=n("Ix37"),X=n("p9DJ"),Z=n("zmay"),J=n("bYOw"),K=function(e){var t=c.createElement(B.a,{type:B.e.P,color:C.f.Alt},Object(u.d)("Prices are shown in <x:bold>{currencyCode}</x:bold>",{"x:bold":function(e){return c.createElement(B.a,{type:B.e.Span,bold:!0},e)},currencyCode:e.currencyCode},"Bits--BuyCard"));e.pricesIncludeVAT&&(t=c.createElement(B.a,{"data-test-selector":"prices-include-vat-selector",type:B.e.P,color:C.f.Alt},Object(u.d)("Prices are shown in <x:bold>{currencyCode}</x:bold> and <x:bold>include VAT</x:bold>",{"x:bold":function(e){return c.createElement(B.a,{type:B.e.Span,bold:!0},e)},currencyCode:e.currencyCode},"Bits--BuyCard")));var n=null;e.minBitsToCheer&&e.minBitsToCheer>1&&(n=c.createElement(B.a,{"data-test-selector":"min-bits-to-cheer-selector",color:C.f.Alt},Object(u.d)("{displayName} requires {minBits} Bits to Cheer in this channel.",{displayName:e.displayName,minBits:e.minBitsToCheer},"Bits--BuyCard")));var i=null;return void 0!==e.bitsBalance&&null!==e.bitsBalance&&(i=c.createElement(B.a,{"data-test-selector":"bits-balance-header-selector",color:C.f.Alt},Object(u.d)("You have {totalBits} Bits",{totalBits:c.createElement("strong",{"data-a-target":"buy-card-bits-count"},e.bitsBalance)},"Bits--BuyCard"))),c.createElement(g.a,{className:"bits-buy-card-header",padding:1,flexShrink:0,fullWidth:!0},c.createElement(g.a,null,e.location===y.d.ChatTooltip&&c.createElement(B.a,{type:B.e.H4,color:C.f.Alt},Object(u.d)("Purchase Bits","Bits--BuyCard")),c.createElement(g.a,{margin:{left:e.location===y.d.GetBitsButtonTopNav?1:0}},t)),e.location===y.d.ChatTooltip&&c.createElement(g.a,{margin:{top:1}},i,n))},$=n("lB7/"),ee=n("ebRM"),te=n("jNOR"),ne="min-bits-to-cheer-selector",ie="prices-include-vat-selector",re=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleBuyClick=function(){t.openBitsCheckout({forcePopup:!1})},t.handleBuyClickExtraSmall=function(){t.openBitsCheckout({forcePopup:!0})},t.openBitsCheckout=function(e){if(t.props.specialOffer){var n=e.forcePopup,i=t.props.displayName||"",r=Object(ee.b)({trackBitsCardInteraction:t.props.trackBitsCardInteraction,channelID:i,trackingID:t.props.trackingID,checkoutID:t.props.checkoutID,purchaseUrl:t.props.specialOffer.url,bitsAmount:t.props.specialOffer.bits,closeAllBits:t.props.closeAllBits,location:t.props.location,offerID:t.props.specialOffer.id,checkoutFormDispatch:t.props.showCheckoutFormModal,forcePopup:n});r&&(t.props.onBuyPopupClose(r),t.props.onClose())}},t}return Object(l.__extends)(t,e),t.prototype.render=function(){var e=this.renderCurrencyDisclaimer(this.props.pricesIncludeVAT,this.props.currencyCode),t=this.renderMinBitsToCheerInChannel(this.props.displayName,this.props.minBitsToCheer),n=null,i=null,r=null;return void 0!==this.props.specialOffer&&null!==this.props.specialOffer&&(n=c.createElement(B.a,{type:B.e.H4,color:C.f.Base,bold:!0},Object(u.d)("{percent} off for first-time Bits buyers!",{percent:Object(u.f)(this.props.specialOffer.discount,"percent")},"Bits--NewUserCheerHeader")),i=c.createElement(g.a,{display:C.h.Flex},c.createElement($.a,{amount:this.props.specialOffer.bits,bitsConfig:this.props.bitsConfig,size:U.b.Small})),r=c.createElement(c.Fragment,null,c.createElement(g.a,{display:C.h.Hide,breakpointExtraSmall:{display:C.h.Block}},c.createElement(L.a,{onClick:this.handleBuyClick,"data-a-target":"bits-purchase-button-"+this.props.specialOffer.bits},this.buyBitsButtonText)),c.createElement(g.a,{display:C.h.Block,breakpointExtraSmall:{display:C.h.Hide}},c.createElement(L.a,{onClick:this.handleBuyClickExtraSmall,"data-a-target":"bits-purchase-button-xs-"+this.props.specialOffer.bits},this.buyBitsButtonText)))),c.createElement(g.a,{className:"bits-buy-card-header",padding:1,flexShrink:0,fullWidth:!0,textAlign:C.q.Center},c.createElement(g.a,{margin:{x:1}},n,t),c.createElement(g.a,{justifyContent:C.m.Center,display:C.h.Flex,margin:{y:1},fullWidth:!0},i),r,c.createElement(g.a,{margin:{top:1}},e))},Object.defineProperty(t.prototype,"buyBitsButtonText",{get:function(){return this.props.specialOffer?Object(u.d)("Buy {amount} Bits for {price}",{amount:Object(u.f)(this.props.specialOffer.bits),price:Object(u.f)(this.props.specialOffer.amount,{style:"currency",currency:this.props.specialOffer.currencyCode})},"Bits--NewUserCheerHeader"):""},enumerable:!0,configurable:!0}),t.prototype.renderCurrencyDisclaimer=function(e,t){return e?c.createElement(B.a,{"data-test-selector":ie,type:B.e.P,color:C.f.Alt},Object(u.d)("Prices are shown in <x:bold>{currencyCode}</x:bold> and <x:bold>include VAT</x:bold>",{"x:bold":function(e){return c.createElement(B.a,{type:B.e.Span,bold:!0},e)},currencyCode:t},"Bits--NewUserCheerHeader")):c.createElement(B.a,{type:B.e.P,color:C.f.Alt},Object(u.d)("Prices are shown in <x:bold>{currencyCode}</x:bold>",{"x:bold":function(e){return c.createElement(B.a,{type:B.e.Span,bold:!0},e)},currencyCode:t},"Bits--NewUserCheerHeader"))},t.prototype.renderMinBitsToCheerInChannel=function(e,t){return t&&t>1?c.createElement(B.a,{"data-test-selector":ne,color:C.f.Alt,italic:!0},Object(u.d)("{displayName} requires {minBits} Bits to Cheer in this channel.",{displayName:e,minBits:t},"BBits--NewUserCheerHeader")):null},t}(c.Component);var ae,oe,se=Object(r.b)(null,(function(e){return Object(d.b)({showCheckoutFormModal:te.a},e)}))(re),le=(n("NvZ5"),"storage.wateb.agreedToWatebTerms.v1");!function(e){e.BitsBundlesErrorText="bits-bundles-error-text",e.WatebTerms="wateb-terms",e.WatebTermsAgreeButton="wateb-continue-button"}(ae||(ae={})),function(e){e[e.Inactive=0]="Inactive",e[e.Error=1]="Error",e[e.Awarded=2]="Awarded"}(oe||(oe={}));var ce=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={wateb:oe.Inactive,watebError:null,bitsAwarded:0,showWatebTerms:!1,agreedToWatebTerms:u.m.get(le,!1)},t.onBuyPopupClose=function(e){Object(D.a)(e,(function(){t.props.data&&t.props.data.refetch()}))},t.onAdBitsAwarded=function(e){t.props.data&&!t.props.data.loading&&t.props.data.refetch(),t.setState({wateb:oe.Awarded,bitsAwarded:e})},t.renderWatebTerms=function(e){return c.createElement(g.a,{className:e,textAlign:C.q.Left,fullWidth:!0,padding:{x:2,bottom:2,top:5},"data-a-target":"bits-show-wateb-terms","data-test-selector":ae.WatebTerms},c.createElement(g.a,{position:C.o.Absolute,padding:{top:.5,left:.5},attachLeft:!0,attachTop:!0},c.createElement("div",{key:"Bits--back-edit",style:{cursor:"pointer"},onClick:t.onCloseWatebTerms},c.createElement(B.a,{color:C.f.Link,type:B.e.Span},c.createElement(Y.a,{asset:Q.a.ChatSettingsBack,height:10,width:10}),Object(u.d)("Back","Bits--Watch-Ad-Terms")))),c.createElement(g.a,{padding:{bottom:2}},c.createElement(B.a,{type:B.e.Span},Object(u.d)("Before continuing to watch ads to earn Bits, we remind you that the <x:link>Bits Acceptable Use Policy</x:link> applies to your participation with this feature and any Bits you may obtain. As a reminder, you may not:",{"x:link":function(e){return c.createElement(X.a,{linkTo:"https://www.twitch.tv/p/legal/bits-acceptable-use/",targetBlank:!0},e)}},"Bits--Watch-Ad-Terms")),c.createElement(g.a,{margin:{y:1}},c.createElement("li",null,Object(u.d)("Obtain Bits to Cheer on your own channel via this feature","Bits--Watch-Ad-Terms")),c.createElement("li",null,Object(u.d)("Collect Bits via this feature through the use of multiple accounts, robots, or other automated means","Bits--Watch-Ad-Terms")))),c.createElement(g.a,{display:C.h.Flex,justifyContent:C.m.Center},c.createElement(L.a,{size:L.b.Small,onClick:t.onAgreeToWatebTerms,"data-a-target":"bits-agree-wateb-terms","data-test-selector":ae.WatebTermsAgreeButton},Object(u.d)("Continue","Bits--Watch-Ad-Terms"))))},t.onAgreeToWatebTerms=function(){u.m.set(le,!0),t.setState({agreedToWatebTerms:!0,showWatebTerms:!1}),t.showWatchAdModal(!0)},t.onCloseWatebTerms=function(){t.setState({showWatebTerms:!1})},t.handleWatchAdClick=function(e){return Object(l.__awaiter)(t,void 0,void 0,(function(){return Object(l.__generator)(this,(function(t){return this.state.agreedToWatebTerms?(this.showWatchAdModal(e),[2]):(this.setState({showWatebTerms:!0}),[2])}))}))},t.receiveAdErrorState=function(e){t.setState({wateb:oe.Error,watebError:e})},t.resetAdErrorState=function(){t.state.wateb===oe.Error&&(t.setState({wateb:oe.Inactive}),t.props.data&&t.props.data.refetch())},t}return Object(l.__extends)(t,e),t.prototype.shouldComponentUpdate=function(e){return!e.adModalOpen},t.prototype.render=function(){var e=this.props.location===y.d.ChatTooltip,t=x("bits-buy-card",{"bits-buy-card__chat-tooltip":e});if(!this.props.data||this.props.data.loading)return c.createElement(j.a,null);if(this.props.data.error)return c.createElement(g.a,{className:x(t,"bits-buy-card--shorter"),textAlign:C.q.Center,"data-a-target":"bits-buy-card-error",alignItems:C.b.Center,justifyContent:C.m.Center,display:C.h.Flex,padding:1,"data-test-selector":ae.BitsBundlesErrorText,fullWidth:!0},c.createElement(B.a,{italic:!0},Object(u.d)("Bits prices are unavailable right now. Check back again later.","Bits--BuyCard")));if(this.state.showWatebTerms)return this.renderWatebTerms(t);var n=this.renderWatebCard();if(n)return c.createElement(g.a,{textAlign:C.q.Center,className:x(t,"bits-buy-card--shorter"),fullWidth:!0},n);var i=[];return this.props.data.currentUser&&this.props.data.currentUser.bitsOffers?i=this.props.data.currentUser.bitsOffers.reduce((function(e,t){return t&&e.push(t),e}),[]):this.props.data.bitsOffers&&(i=this.props.data.bitsOffers),this.props.shouldShowNewUserCheerUX?this.renderNewUserCheerBuyCard(t,i):this.renderDefaultBuyCard(t,i)},t.prototype.renderDefaultBuyCard=function(e,t){var n=this.doPricesIncludeVAT(t),i=this.getCurrencyCode(t),r=this.props.data&&this.props.data.currentUser,a=this.props.data&&this.props.data.user,o=c.createElement(K,{bitsBalance:r&&r.bitsBalance||void 0,displayName:a&&a.displayName||this.props.channelLogin||"",minBitsToCheer:a&&a.cheer&&a.cheer.settings&&a.cheer.settings.cheerMinimumBits||void 0,pricesIncludeVAT:n,currencyCode:i,location:this.props.location}),s=this.renderBitsOffers(t,{hidePromos:this.props.hidePromos,hideWateb:this.props.hideWateb,size:this.props.size});return c.createElement(g.a,{className:e,"data-a-target":"bits-buy-card",fullWidth:!0,display:C.h.Flex,flexDirection:C.i.Column},o,s)},t.prototype.renderNewUserCheerBuyCard=function(e,t){var n=this.getSpecialOffer(t),i=this.doPricesIncludeVAT(t),r=this.getCurrencyCode(t),a=null;this.props.onBack&&(a=c.createElement(g.a,{position:C.o.Absolute,padding:{top:.5,left:.5},attachLeft:!0,attachTop:!0},c.createElement("div",{key:"Bits--back-edit","data-a-target":"bits-buy-card--back",style:{cursor:"pointer"},onClick:this.props.onBack},c.createElement(B.a,{color:C.f.Link,type:B.e.Span},c.createElement(Y.a,{asset:Q.a.ChatSettingsBack,height:10,width:10}),Object(u.d)("Back","Bits--Buy-Card")))));var o=c.createElement(se,{bitsConfig:this.props.bitsConfig,bitsBalance:this.props.data&&this.props.data.currentUser&&this.props.data.currentUser.bitsBalance||void 0,displayName:this.props.data&&this.props.data.user&&this.props.data.user.displayName||this.props.channelLogin||"",minBitsToCheer:this.props.data&&this.props.data.user&&this.props.data.user.cheer&&this.props.data.user.cheer.settings.cheerMinimumBits||void 0,pricesIncludeVAT:i,currencyCode:r,closeAllBits:this.props.closeAllBits,trackingID:this.props.trackingID,checkoutID:this.props.checkoutID,location:this.props.location,specialOffer:n,isLoggedIn:this.props.isLoggedIn,onBuyPopupClose:this.onBuyPopupClose,onClose:this.props.onClose,trackBitsCardInteraction:this.props.trackBitsCardInteraction}),s=this.renderBitsOffers(t,{hidePromos:!0,hideWateb:!1,size:J.b.Smallnoscroll});return c.createElement(I.b,{"data-a-target":"bits-buy-card",className:e},c.createElement(c.Fragment,null,a,o,s))},t.prototype.renderBitsOffers=function(e,t){var n=t.hidePromos,i=t.hideWateb,r=t.size;if(!this.props||!this.props.data)return null;var a=this.props.data.user?this.props.data.user.id:"",o=this.props.hideBitsSkusExperiment?z.a.Control:Object(z.b)(u.p.experiments.getAndTrackAssignment("bits_skus_reduction"));return c.createElement(J.a,{offers:e,size:r,hidePromos:n,hideWateb:i,bitsConfig:this.props.bitsConfig,channelID:a||void 0,trackingID:this.props.trackingID,checkoutID:this.props.checkoutID,channelLogin:this.props.channelLogin,closeAllBits:this.props.closeAllBits,currentUserSHA:this.props.data&&this.props.data.currentUser&&this.props.data.currentUser.idSHA1||void 0,handleWatchAdClick:this.handleWatchAdClick,location:this.props.location,onBuyPopupClose:this.onBuyPopupClose,onClose:this.props.onClose,trackBitsCardInteraction:this.props.trackBitsCardInteraction,skusReductionVariant:o})},t.prototype.doPricesIncludeVAT=function(e){return e.filter((function(e){return e.type===T.t.BUNDLE})).some((function(e){return e.includesVAT}))},t.prototype.getCurrencyCode=function(e){var t="",n=e.filter((function(e){return e.type===T.t.BUNDLE})).pop();return n&&n.type===T.t.BUNDLE&&(t=n.currencyCode),t},t.prototype.getSpecialOffer=function(e){return e.filter((function(e){return e.type===T.t.BUNDLE})).find((function(e){return e.isPromo&&null!==e.promotion&&e.promotion.id===V.b}))},t.prototype.renderWatebCard=function(){var e=this;if(this.props.data&&this.props.data.currentUser)switch(this.state.wateb){case oe.Awarded:return c.createElement(R,{amount:this.state.bitsAwarded,onStartCheering:this.props.onClose,onWatchAnother:function(){return e.handleWatchAdClick(!1)},trackBitsCardInteraction:this.props.trackBitsCardInteraction});case oe.Error:return c.createElement(q,{type:this.state.watebError||i.Unknown,onClose:this.props.onClose,onTryAgain:this.resetAdErrorState});default:return}},t.prototype.showWatchAdModal=function(e){this.props.data&&this.props.data.currentUser&&this.props.data.user&&this.props.data.user.id&&this.props.showWatchAdModal({userId:this.props.data.currentUser.id,hashedUserId:this.props.data.currentUser.idSHA1,onBitsAwarded:this.onAdBitsAwarded,onError:this.receiveAdErrorState,requestRef:y.h.ShowAdButton,channelID:this.props.data.user.id,needsCaptcha:e})},t.defaultProps={hidePromos:!1,hideWateb:!1},t}(c.Component);var de=Object(d.d)(Object(h.a)(Z,{name:"data",options:function(e){var t;return{variables:{channelLogin:null!==(t=e.channelLogin)&&void 0!==t?t:"",withChannel:!!e.channelLogin,isLoggedIn:e.isLoggedIn}}}}),Object(G.withLatencyTracking)("BitsBuyCard",{autoReportInteractive:!0}),Object(_.b)((function(e){return{bitsConfig:e.bitsConfig}})))(ce);var ue=Object(r.b)((function(e){return{adModalOpen:Object(o.b)(e,A),isLoggedIn:Object(s.f)(e)}}),(function(e){return{showWatchAdModal:function(t){return e(Object(a.e)(A,t))}}}))(de)},"r/lI":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"FirstCheerBuilder"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cheer"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"settings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emoteMinimumBits"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cheerMinimumBits"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:148}};n.loc.source={body:"query FirstCheerBuilder($channelLogin: String!) {\nuser(login: $channelLogin) {\nid\ncheer {\nid\nsettings {\nid\nemoteMinimumBits\ncheerMinimumBits\n}\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function r(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.FirstCheerBuilder=function(e,t){var n={kind:e.kind,definitions:[r(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var a=i[t]||new Set,o=new Set,s=new Set;for(a.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=r(e,t);i&&n.definitions.push(i)})),n}(n,"FirstCheerBuilder")},rAoL:function(e,t,n){},ry0r:function(e,t,n){"use strict";n.r(t),n.d(t,"BitsCard",(function(){return st}));var i,r=n("/MKj"),a=n("kRBY"),o=n("mrSG"),s=n("w09P"),l=n("q1tI"),c=n("ANjH"),d=n("/7QA"),u=n("yR8l"),m=n("eDVu"),p=n("0Log"),h=n("geRD"),f=n("/aPz"),b=n("DMoW"),g=n("IZXT"),C=n("opIq"),v=n("bYOw"),k=n("H31v"),E=n("8nkl"),y=n("ao1a"),B=n("RiD7"),S=n("OCDW"),O=n("Gcqi"),N=n("TqpA"),w=n("zrSb"),A=n("Yegi"),x=n("uq9l"),I=function(){return l.createElement(S.a,{textAlign:A.q.Center,padding:1},l.createElement(x.a,{italic:!0},Object(d.d)("Have no fear, your Bits inventory is safe! The ability to Cheer will return shortly.","BitsCard")))},D=n("/0dD"),T=n("VeT4"),j=n("5zXJ"),_=n("5e0Q"),F=n("eirU"),U=(n("wtKP"),function(e){var t=void 0!==e.progress,n=l.createElement("img",{className:"cheer-badge__image",src:e.badge.image1x,alt:e.badge.title,srcSet:e.badge.image1x+" 1x, "+e.badge.image2x+" 2x, "+e.badge.image4x+" 4x"});if(!t)return n;var i=e.progress?Math.max(Math.round(18*(1-e.progress)),1):18;return l.createElement("div",{className:"cheer-badge__progress-container"},n,l.createElement("div",{className:"cheer-badge__progress-overlay",style:{width:i+"px"},"data-test-selector":"cheer-progress"}))}),M=n("MO/j"),L=function(e){var t=e.channelID,n=e.isAnonymous,i=Object(F.d)(M,{variables:{channelID:t||""},skip:!t}).data,r=l.useMemo((function(){var e,t,n;return(null===(n=null===(t=null===(e=null==i?void 0:i.user)||void 0===e?void 0:e.self)||void 0===t?void 0:t.bitsBadge)||void 0===n?void 0:n.current)?l.createElement(S.a,{display:A.h.Inline,margin:{right:.5}},l.createElement(U,{badge:i.user.self.bitsBadge.current})):null}),[i]),a=l.useMemo((function(){var e,t,n;return(null===(n=null===(t=null===(e=null==i?void 0:i.user)||void 0===e?void 0:e.self)||void 0===t?void 0:t.bitsBadge)||void 0===n?void 0:n.next)?l.createElement(S.a,{display:A.h.Inline,margin:{right:.5}},l.createElement(U,{badge:i.user.self.bitsBadge.next,progress:i.user.self.bitsBadge.progress})):null}),[i]),o=l.useMemo((function(){var e,t,n;return(null===(n=null===(t=null===(e=null==i?void 0:i.user)||void 0===e?void 0:e.self)||void 0===t?void 0:t.bitsBadge)||void 0===n?void 0:n.nextBits)?Object(d.d)("Next badge unlocks in {bitsToNextBadge} Bits!",{bitsToNextBadge:i.user.self.bitsBadge.nextBits-i.user.self.bitsBadge.totalBits},"Bits--BalanceFooter"):null}),[i]);return l.useMemo((function(){var e,t;return(null===(t=null===(e=null==i?void 0:i.user)||void 0===e?void 0:e.self)||void 0===t?void 0:t.bitsBadge)&&(r||a)?l.createElement(S.a,{padding:{bottom:.5},visibility:n?A.s.Hidden:A.s.Visible},r,a,o):null}),[r,n,a,o,i])},P=function(e){var t=Object(d.d)("{bitsGem} Log in to see your Bits balance",{bitsGem:l.createElement(T.a,{count:100,withImage:!0,bitsConfig:e.bitsConfig,themeOverride:D.a.Dark})},"Bits--BalanceFooter");return void 0!==e.balance&&null!==e.balance&&(t=Object(d.d)("You have {currentBits}",{currentBits:l.createElement(T.a,{count:e.balance,withImage:!0,withText:!0,bitsConfig:e.bitsConfig,themeOverride:D.a.Dark})},"Bits--BalanceFooter")),l.createElement(S.a,{flexGrow:1,padding:1,className:"bits-balance-footer"},l.createElement(L,{channelID:e.channelID,isAnonymous:e.isAnonymous}),l.createElement(S.a,{display:A.h.Flex,flexGrow:1,alignItems:A.b.Center,justifyContent:A.m.Between},l.createElement("div",null,t),(void 0===e.showBuyButton||void 0!==e.showBuyButton&&e.showBuyButton)&&l.createElement(_.a,{disabled:void 0===e.balance||void 0!==e.balance&&e.balance>j.m,onClick:e.onClickGetBits,"data-test-selector":"get-bits-button","data-a-target":"get-bits-button",type:_.d.Secondary,overlay:!0},Object(d.d)("Get Bits","Bits--BalanceFooter"))))},H=n("jv9u"),R=n("wUQP"),W=n("Uh2Q"),q=n("ebRM"),V=n("LNol"),z=n("Ix37"),G=n("IyK4"),Y=n("p9DJ"),Q=function(){return l.createElement(S.a,{display:A.h.Flex,flexGrow:1,flexDirection:A.i.Column,justifyContent:A.m.Center,alignItems:A.b.Center,padding:1,borderRadius:{topLeft:A.e.Large,topRight:A.e.Large}},l.createElement(S.a,{display:A.h.Flex,flexDirection:A.i.Row,alignItems:A.b.Center,padding:{bottom:1}},l.createElement(S.a,{display:A.h.Flex,alignItems:A.b.Center,padding:{right:.5}},l.createElement(V.a,{asset:z.a.Ghost,type:V.b.Brand})),l.createElement(x.a,{type:x.e.Span,fontSize:A.k.Size4,bold:!0},Object(d.d)("Cheering Anonymously","Bits--AnonymousIntro"))),l.createElement(x.a,null,Object(d.d)("Your name will appear in Chat as {anAnonymousCheerer} and custom messaging will be turned off.",{anAnonymousCheerer:l.createElement(G.a,{padding:{y:.5}},l.createElement(x.a,{bold:!0},j.c))},"Bits--AnonymousIntro")),l.createElement(S.a,{margin:1},l.createElement(Y.a,{linkTo:"https://help.twitch.tv/customer/portal/articles/2449458#AnonCheer",targetBlank:!0},Object(d.d)("Learn more","Bits--AnonymousIntro"))))},X=function(e){return l.createElement(S.a,{display:A.h.Flex,flexGrow:1,flexDirection:A.i.Column,justifyContent:A.m.Center,alignItems:A.b.Center,padding:1},l.createElement(S.a,{padding:{top:1}},l.createElement(x.a,{type:x.e.H4,color:A.f.Link,bold:!0},Object(d.d)("Cheer to support Direct Relief","Bits--CharityCheerIntro"))),l.createElement(x.a,null,Object(d.d)("Cheer with the Charity Cheermote or #charity and we'll donate $0.20 for every 100 Bits to Direct Relief, PLUS you'll unlock a custom charity chat badge. Available December 12 - 27.","Bits--CharityCheerIntro")),l.createElement(x.a,null,Object(d.d)("<x:link>Learn more</x:link>",{"x:link":function(e){return l.createElement(Y.a,{targetBlank:!0,linkTo:"https://link.twitch.tv/blizzardofbits"},e)}},"Bits--CharityCheerIntro")),l.createElement(S.a,{padding:{top:1,bottom:1}},l.createElement(Y.a,{linkTo:"#",onClick:e.onClickHelp,"data-test-selector":"help-link"},Object(d.d)("How do I cheer?","Bits--CharityCheerIntro"))))},Z=n("dx/T"),J=n("2tXM"),K=function(e){return l.createElement(S.a,{display:A.h.Flex,flexGrow:1,flexDirection:A.i.Column,justifyContent:A.m.Center,alignItems:A.b.Center,padding:1},l.createElement(S.a,{padding:{top:2,bottom:2}},l.createElement(x.a,{type:x.e.H5,color:A.f.Link,bold:!0},Object(d.d)("Cheering Supports Your Streamer!","Bits--CheermoteIntro"))),l.createElement(x.a,null,Object(d.d)("Select a Cheermote to start your Cheer","Bits--CheermoteIntro")),l.createElement(J.a,{onClickHelp:e.onClickHelp}))},$=n("3CMh"),ee=function(e){var t=e.headline||e.prefix+(e.tier||"");return l.createElement(S.a,{display:A.h.Flex,flexDirection:A.i.Column,alignItems:A.b.Center,padding:1},!e.hideHeadline&&l.createElement(x.a,{type:x.e.H4,bold:!0},t),l.createElement($.a,{prefix:e.prefix,amount:e.tier,showImage:!0,showAmount:e.tier>0}),l.createElement(J.a,{onClickHelp:e.onClickHelp}))},te=(n("Aa/l"),function(e){var t=null;return e.minToCheer>1&&(t=l.createElement(x.a,{"data-test-selector":"min-to-cheer-selector",color:A.f.Alt2,italic:!0},Object(d.d)("This channel has a Cheer minimum of {minToCheer} Bits",{minToCheer:e.minToCheer},"Bits--CheermoteTierIntro"))),l.createElement(S.a,{display:A.h.Flex,flexGrow:1,flexDirection:A.i.Column,alignItems:A.b.Center,justifyContent:A.m.Center,padding:1,className:"cheermote-tier-intro"},l.createElement(S.a,{padding:{x:4},margin:{bottom:1}},l.createElement(x.a,{color:A.f.Alt2},Object(d.d)("Cheermotes have multiple tiers, rollover below to see each one!","Bits--CheermoteTierIntro"))),t)}),ne=n("4VQm"),ie=(n("ecb7"),function(e){var t=e.prefixes.map((function(e,t){if(e.alt&&e.cheerAmount)return l.createElement(G.a,{className:"pending-cheer-list__list-item",key:t,padding:{x:1}},l.createElement("li",null,l.createElement($.a,{prefix:e.alt,amount:e.cheerAmount>j.o?j.o:e.cheerAmount,size:$.b.Small,showAmount:!0,showImage:!0})))}));return l.createElement(S.a,{display:A.h.Flex,flexDirection:A.i.Row,alignItems:A.b.End,justifyContent:A.m.Center,flexWrap:A.j.Wrap,margin:{top:1},className:"pending-cheer-list"},t)}),re=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.__extends)(t,e),t.prototype.render=function(){return this.props.event,null},t}(l.Component),ae=n("gq8D"),oe=n("Mg72");!function(e){e.MinCheer="sponsored-campaign-minimum-cheer",e.OverBitsTotal="sponsored-campaign-over-total",e.CannotBeSponsored="sponsored-campaign-cannot-be-sponsored",e.OverUserLimit="sponsored-campaign-over-user-limit"}(i||(i={}));var se,le,ce=function(e){var t=0;if(e.prefixes.forEach((function(n){n.alt===e.sponsoredCampaignPrefix&&n.cheerAmount&&(t+=n.cheerAmount)})),t<=0)return null;if(t<e.sponsoredCampaign.minimumBitsAmount){var n=Object(d.d)("This Cheermote has a minimum of {minBits} Bits for {brand} to add extra Bits.",{minBits:e.sponsoredCampaign.minimumBitsAmount,brand:e.sponsoredCampaign.brandName},"Bits--PendingCheer");return l.createElement(x.a,{"data-test-selector":i.MinCheer,color:A.f.Error},n)}if(!e.sponsoredCampaign.bitsUsed||!e.sponsoredCampaign.bitsTotal||e.sponsoredBitsBonus+e.sponsoredCampaign.bitsUsed>e.sponsoredCampaign.bitsTotal){n=Object(d.d)("Not enough Bits from the sponsored pool to support your cheer with the {brand} Cheermote.",{brand:e.sponsoredCampaign.brandName},"Bits--PendingCheer");return l.createElement(x.a,{"data-test-selector":i.OverBitsTotal,color:A.f.Error},n)}if(e.sponsoredCampaign.self&&(!e.sponsoredCampaign.self.canBeSponsored||e.sponsoredCampaign.self.bitsUsed+e.sponsoredBitsBonus>e.sponsoredCampaign.userLimit)){n=Object(d.d)("You have reached the user limit for use of the {brand} Cheermote.",{brand:e.sponsoredCampaign.brandName},"Bits--PendingCheer");return l.createElement(x.a,{"data-test-selector":i.OverUserLimit,color:A.f.Error},n)}return null},de=(n("H0r1"),n("XmgI"));!function(e){e.DisplayOnlyCheermote="display-only-cheermote-selector",e.ZeroBalance="zero-balance-selector",e.PurchaseMore="purchase-more-selector",e.LargestCheermote="largest-cheermote-selector",e.MinimumCheerSelector="minimum-cheer-selector",e.MinimumCheermoteSelector="minimum-cheermote-selector",e.MessageLengthExceeded="message-length-exceeded-selector",e.UserBanned="user-banned-selector",e.UserIneligible="user-ineligible-selector",e.UserSuspended="user-suspended-selector",e.ChannelIneligible="channel-ineligible-selector",e.ZalgoMessage="zalgo-message-selector",e.ChannelBlockedTerms="channel-blocked-terms-selector",e.InvalidEventID="invalid-event-id-selector",e.RequestThrottled="request-throttled-selector",e.Unknown="unknown-selector"}(le||(le={}));var ue,me=((se={})[b.ve.USER_BANNED]=le.UserBanned,se[b.ve.USER_INELIGIBLE]=le.UserIneligible,se[b.ve.USER_SUSPENDED]=le.UserSuspended,se[b.ve.CHANNEL_INELIGIBLE]=le.ChannelIneligible,se[b.ve.ZALGO_MESSAGE]=le.ZalgoMessage,se[b.ve.CHANNEL_BLOCKED_TERMS]=le.ChannelBlockedTerms,se[b.ve.INVALID_EVENT_ID]=le.InvalidEventID,se[b.ve.REQUEST_THROTTLED]=le.RequestThrottled,se[b.ve.UNKNOWN]=le.Unknown,se),pe=function(e){if(e.smallestCheermote<e.minPerEmote||e.bitsSendHasError&&e.bitsSendErrorCode===b.ve.EMOTE_AMOUNT_BELOW_MIN_BITS){var t=Object(d.d)("This channel has set a minimum of {minPerEmote} Bits to use a Cheer emote in chat.",{minPerEmote:e.minPerEmote},"Bits--PendingCheer");return e.onValidationError(b.ve.EMOTE_AMOUNT_BELOW_MIN_BITS),l.createElement(x.a,{"data-test-selector":le.MinimumCheermoteSelector,color:A.f.Error,italic:!0,"data-a-target":"min-emote-bits-error"},t)}if(e.chatMessage&&e.chatMessage.length>j.n||e.bitsSendHasError&&e.bitsSendErrorCode===b.ve.MESSAGE_LENGTH_EXCEEDED){var n=Object(d.d)("You have exceeded the maximum number of characters you can use in your cheer.","Bits--PendingCheer");return e.onValidationError(b.ve.MESSAGE_LENGTH_EXCEEDED),l.createElement(x.a,{"data-test-selector":le.MessageLengthExceeded,color:A.f.Error,italic:!0},n)}if(e.bitsSendHasError){var i=me[e.bitsSendErrorCode]||me[b.ve.UNKNOWN],r=void 0;switch(e.bitsSendErrorCode){case b.ve.ZALGO_MESSAGE:r=Object(d.d)("You have unsupported characters in your message, please remove them and try again.","Bits--PendingCheer");break;case b.ve.USER_BANNED:case b.ve.USER_INELIGIBLE:case b.ve.USER_SUSPENDED:case b.ve.CHANNEL_INELIGIBLE:r=Object(d.d)("Sorry, you are unable to send Bits in this channel at this time.","Bits--PendingCheer");break;case b.ve.CHANNEL_BLOCKED_TERMS:r=Object(d.d)("You have blocked words in your message, please remove them and try again.","Bits--PendingCheer");break;case b.ve.INVALID_EVENT_ID:case b.ve.REQUEST_THROTTLED:case b.ve.UNKNOWN:default:r=Object(d.d)("Something went wrong when processing your cheer, please try again later.","Bits--PendingCheer")}return e.onValidationError(e.bitsSendErrorCode),l.createElement(x.a,{"data-test-selector":i,color:A.f.Error,italic:!0},r)}return null},he=function(e){if(e.largestCheermote>j.o||e.bitsSendHasError&&e.bitsSendErrorCode===b.ve.TOO_LARGE_BITS_EMOTE){var t=Object(d.d)("{maximumCheerSize} is the largest Cheer emote, add another emote to Cheer louder!",{maximumCheerSize:j.o},"Bits--PendingCheer");return e.onValidationError(b.ve.TOO_LARGE_BITS_EMOTE),l.createElement(x.a,{"data-test-selector":le.LargestCheermote,"data-a-target":"max-cheer-bits-error"},t)}if(0===e.bitsBalance)return e.onValidationError(b.ve.INSUFFICIENT_BALANCE),l.createElement(x.a,{"data-test-selector":le.ZeroBalance,"data-a-target":"zero-bits-error"},Object(d.d)("Please get Bits. You have 0 Bits and cannot send a Cheer","Bits--PendingCheer"));if(e.bitsBalance&&e.amount>e.bitsBalance)return e.onValidationError(b.ve.INSUFFICIENT_BALANCE),l.createElement(x.a,{"data-test-selector":le.PurchaseMore,"data-a-target":"need-more-bits-error"},Object(d.d)("Please purchase {neededBits} more Bits to Cheer",{neededBits:e.amount-e.bitsBalance},"Bits--PendingCheer"));if(e.amount<e.minToCheer||e.bitsSendHasError&&e.bitsSendErrorCode===b.ve.AMOUNT_BELOW_MIN_BITS){e.onValidationError(b.ve.AMOUNT_BELOW_MIN_BITS);var n=Object(d.d)("Add {moreBitsAmount} more Bits to reach this channel's minimum Cheer.",{moreBitsAmount:e.minToCheer-e.amount},"Bits--PendingCheer");return l.createElement(x.a,{"data-test-selector":le.MinimumCheerSelector,"data-a-target":"min-cheer-bits-error"},n)}if(e.amount>j.p||e.bitsSendHasError&&e.bitsSendErrorCode===b.ve.TOO_LARGE_CHEER){e.onValidationError(b.ve.TOO_LARGE_CHEER);var i=Object(d.d)("{maximumCheerSize} is the maximum amount of Bits you can send in one message, send multiple messages if you want to Cheer more!",{maximumCheerSize:j.p},"Bits--PendingCheer");return l.createElement(x.a,{"data-test-selector":le.MinimumCheerSelector,"data-a-target":"max-message-bits-error"},i)}if(e.chatMessage&&Object(de.c)(e.chatMessage,e.bitsConfig)){e.onValidationError(b.ve.INVALID_BITS_MESSAGE);var r=Object(d.d)("message contains at least one display only Cheermote.","Bits--PendingCheer");return l.createElement(x.a,{"data-test-selector":le.DisplayOnlyCheermote,"data-a-target":"display-only-bits-error"},r)}return null};!function(e){e.AutoRefillWarning="auto-refill-threshold-warning",e.DefaultPendingCheerMessage="default-pending-cheer-message-selector",e.EventReminder="event-reminder-selector",e.InlineError="inline-error",e.FullError="full-error",e.GhostIcon="ghost-icon"}(ue||(ue={}));var fe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={inlineError:!1,fullError:!1},t.isBitsAutoRefillEnabled=Object(R.c)("pm_b_auto_r"),t.getAutoRefillInfo=function(){return t.isBitsAutoRefillEnabled&&t.props.bitsBalance&&t.props.autoRefillThreshold&&t.props.bitsBalance-t.props.amount<t.props.autoRefillThreshold?l.createElement(x.a,null,Object(d.d)("This cheer will trigger an auto-refill.","Bits--PendingCheer")):null},t}return Object(o.__extends)(t,e),t.prototype.render=function(){var e;if(this.props.prefixes&&1===this.props.prefixes.length){var t=this.props.prefixes[0].alt;t&&(e=l.createElement(S.a,{padding:{top:2}},l.createElement($.a,{prefix:t,amount:this.props.amount>j.o?j.o:this.props.amount,showImage:!0,showAmount:!0})))}else if(this.props.prefixes)e=l.createElement(S.a,{margin:{top:1}},l.createElement(ne.b,{className:"pending-cheer__scroll-container"},l.createElement(ie,{prefixes:this.props.prefixes})));else{var n=Object(d.d)("You are using a total of {totalBits} Bits to cheer in {channelName}!",{totalBits:l.createElement("strong",null,this.props.amount),channelName:this.props.channelDisplayName},"Bits--PendingCheer");e=l.createElement(S.a,{"data-test-selector":ue.DefaultPendingCheerMessage,padding:{top:2,x:5}},l.createElement(x.a,{color:A.f.Alt2,"data-a-target":"total-bits-message"},n))}var i=null;this.props.prefixes&&this.props.sponsoredCampaign&&this.props.sponsoredCampaignPrefix&&(i=l.createElement(ce,{prefixes:this.props.prefixes,sponsoredCampaign:this.props.sponsoredCampaign,sponsoredCampaignPrefix:this.props.sponsoredCampaignPrefix,sponsoredBitsBonus:this.props.sponsoredBitsBonus}));var r=pe({minPerEmote:this.props.minPerEmote,smallestCheermote:this.props.smallestCheermote,bitsSendHasError:this.props.bitsSendHasError,bitsSendErrorCode:this.props.bitsSendErrorCode,chatMessage:this.props.chatMessage,onValidationError:this.props.onCheerInvalid}),a=he({minToCheer:this.props.minToCheer,largestCheermote:this.props.largestCheermote,bitsSendHasError:this.props.bitsSendHasError,bitsSendErrorCode:this.props.bitsSendErrorCode,bitsConfig:this.props.bitsConfig,bitsBalance:this.props.bitsBalance,amount:this.props.amount,chatMessage:this.props.chatMessage,onValidationError:this.props.onCheerInvalid});r||a||this.props.onCheerInvalid(void 0);var s=this.getAutoRefillInfo(),c=l.createElement($.a,{amount:this.props.amount+this.props.bonusBits,prefix:j.k,display:A.h.Inline,showImage:!1,showAmount:!0,size:$.b.Medium}),u=[l.createElement(S.a,{key:"cheering-total-bits"},l.createElement(x.a,{fontSize:A.k.Size4,bold:!0},Object(d.d)("Cheering {totalBits} Bits",{totalBits:c},"Bits--PendingCheer")))];if(this.props.isAnonymous){var m=l.createElement(S.a,{key:"ghost-icon",display:A.h.Flex,alignItems:A.b.Center,margin:{right:.5}},l.createElement(V.a,{"data-test-selector":ue.GhostIcon,asset:z.a.Ghost,type:V.b.Brand}));u=Object(o.__spreadArrays)([m],u)}return l.createElement(S.a,null,l.createElement(S.a,{display:A.h.Flex,flexDirection:A.i.Column,alignItems:A.b.Center,padding:1,className:"pending-cheer"},l.createElement(G.a,{display:A.h.Flex,alignItems:A.b.Center},l.createElement(ae.a,{transitionType:oe.d.Fade},u)),!r&&e,!r&&!a&&i&&l.createElement(S.a,{padding:{top:1}},i),!r&&a&&l.createElement(S.a,{"data-test-selector":ue.InlineError,padding:{top:1},color:A.f.Error},a),r&&l.createElement(S.a,{"data-test-selector":ue.FullError,padding:{top:3,x:3}},r),!r&&!a&&s&&l.createElement(S.a,{"data-test-selector":ue.AutoRefillWarning,padding:{top:1},className:"pending-cheer__auto-refill-info"},s)),!r&&!a&&l.createElement(re,{event:this.props.event,amount:this.props.amount,"data-test-selector":ue.EventReminder}))},t}(l.PureComponent),be=n("x1M1"),ge=(n("zmH+"),{themed:!0,dark:{"1x":j.f+"/dark/animated/promo/intro.gif"},light:{"1x":j.f+"/light/animated/promo/intro.gif"}}),Ce=function(){return l.createElement(S.a,{display:A.h.Flex,flexDirection:A.i.Column,alignItems:A.b.Center,justifyContent:A.m.Center,flexGrow:1,className:"bits-sending"},l.createElement(S.a,{padding:{bottom:1}},l.createElement(be.a,{sources:ge})),l.createElement(x.a,{italic:!0},Object(d.d)("Your Cheer is currently processing.","Bits--SendingBits")))},ve=n("HGFl"),ke=n("JjwZ"),Ee=n("uuYk"),ye=(n("Yr1V"),function(e){var t=Object(d.g)(e.sponsorCampaign.bitsUsed||0,{maximumFractionDigits:1,round:Math.floor}),n=Object(d.g)(e.sponsorCampaign.bitsTotal||0,{maximumFractionDigits:1,round:Math.floor}),i=e.sponsorCampaign.bitsUsed&&e.sponsorCampaign.bitsTotal?e.sponsorCampaign.bitsUsed/e.sponsorCampaign.bitsTotal*100:0,r=Object(ve.h)(d.b.get("subtember_sponsored_cheermote_end_date","2019-09-24T23:59:59Z"));return l.createElement(S.a,{background:A.d.AccentAlt2,color:A.f.Overlay,display:A.h.Flex,flexGrow:1,flexDirection:A.i.Column,position:A.o.Relative,justifyContent:A.m.Center,alignItems:A.b.Center,padding:1,borderRadius:{topLeft:A.e.Large,topRight:A.e.Large}},l.createElement(S.a,{padding:{top:1,bottom:1}},l.createElement(x.a,{type:x.e.H5,bold:!0},Object(d.d)("Give more Bits to this streamer!","Bits--SponsorIntro"))),l.createElement(S.a,{display:A.h.Flex,flexDirection:A.i.Row,fullWidth:!0,padding:{bottom:1}},l.createElement(G.a,{padding:{right:1}},l.createElement(ke.a,{src:e.sponsorCampaign.brandImageURL,alt:e.sponsorCampaign.brandName})),l.createElement(S.a,{display:A.h.Flex,flexDirection:A.i.Column,flexGrow:1},l.createElement(G.a,{alignSelf:A.c.Baseline},l.createElement(x.a,null,Object(d.d)("{brandName} Bits",{brandName:e.sponsorCampaign.brandName},"Bits--SponsorIntro"))),"amazon-hunters-2020"===e.sponsorCampaign.id?null:l.createElement(l.Fragment,null,l.createElement(Ee.a,{value:i,mask:!0}),l.createElement(S.a,{display:A.h.Flex,flexDirection:A.i.Row,justifyContent:A.m.Between},l.createElement(x.a,{fontSize:A.k.Size7},Object(d.d)("{bitsUsed} Used",{bitsUsed:t},"Bits--SponsorIntro")),l.createElement(x.a,{fontSize:A.k.Size7},Object(d.d)("{totalBits}",{totalBits:n},"Bits--SponsorIntro")))))),"SUBtember"===e.sponsorCampaign.brandName?l.createElement(S.a,null,l.createElement(x.a,{fontSize:A.k.Size7},Object(d.d)("In celebration of {event}, the {brand} Cheermote gives {percent} bonus Bits when you cheer {minCheer} or more through {endDate}.",{event:"SUBtember",brand:"Subway",percent:Object(d.f)(e.sponsorCampaign.thresholds[0].matchedPercent,"percent"),minCheer:e.sponsorCampaign.minimumBitsAmount,endDate:Object(d.c)(r,"long")},"Bits--SponsorIntro")),l.createElement(Y.a,{linkTo:"https://blog.twitch.tv/subtember-is-back-and-its-better-than-ever-9533f39098d5",type:Y.b.Overlay,targetBlank:!0},Object(d.d)("Learn more","Bits--SponsorIntro"))):l.createElement(S.a,null,l.createElement(x.a,{fontSize:A.k.Size7},Object(d.d)("The {brandName} Cheermote gives {sponsorPercentage}% bonus Bits when you Cheer {minimumSponsorBits} or more!",{minimumSponsorBits:e.sponsorCampaign.thresholds[0].minimumBits,brandName:e.sponsorCampaign.brandName,sponsorPercentage:100*e.sponsorCampaign.thresholds[0].matchedPercent},"Bits--SponsorIntro"))))}),Be=n("FZ/2"),Se=(n("u0cu"),function(e){var t=Object(d.d)("You are using {totalBits} Bits to cheer in {channelName}'s chat.",{totalBits:e.totalBits,channelName:e.channelDisplayName},"Bits--UndoPrompt"),n=null;if(e.prefixes&&e.prefixes.length>1)n=l.createElement(ne.b,{className:"bits-undo-prompt__scroll-container"},l.createElement(S.a,{margin:{top:1}},l.createElement(ie,{prefixes:e.prefixes})));else{var i=e.prefixes[0].alt;i&&(n=l.createElement(S.a,{padding:{bottom:1}},l.createElement($.a,{prefix:i,amount:e.totalBits,showAmount:!0,showImage:!0})))}return l.createElement(S.a,{display:A.h.Flex,flexDirection:A.i.Column,alignItems:A.b.Center,justifyContent:A.m.Center,flexGrow:1,padding:1,className:"bits-undo-prompt"},n,l.createElement(x.a,null,t))}),Oe=function(e){if(e.isSending)return e.totalBits<j.q?l.createElement(Ce,null):l.createElement(Se,{channelDisplayName:e.displayName,prefixes:e.currentCheers,totalBits:e.totalBits});if(e.hoveredCheermote)return l.createElement(ee,{prefix:e.hoveredCheermote,tier:e.hoveredTier,onClickHelp:e.showHelp});var t=Ne(e.bitsConfig),n=we(e.bitsConfig),i=d.b.get(j.s,R.b.Off);if(e.totalBits)return l.createElement(fe,{bitsConfig:e.bitsConfig,prefixes:e.currentCheers,amount:e.totalBits,bonusBits:e.bonusBits,channelDisplayName:e.displayName,bitsBalance:e.bitsBalance,largestCheermote:e.largestCheermote,smallestCheermote:e.smallestCheermote,minPerEmote:e.emoteMinimumBits,minToCheer:e.cheerMinimumBits,event:e.event,sponsoredCampaign:t,sponsoredCampaignPrefix:n,sponsoredBitsBonus:e.bonusBits,bitsSendErrorCode:e.bitsSendErrorCode,bitsSendHasError:e.bitsSendHasError,chatMessage:e.chatMessage,onCheerInvalid:e.onCheerInvalid,isAnonymous:e.isAnonymous,autoRefillThreshold:e.autoRefillThreshold});if(e.helpRequested)return l.createElement(Z.a,null);var r=d.b.get(j.i,R.b.Off),a=null;e.bitsOffers&&(a=e.bitsOffers.find((function(e){return Object(q.f)(e)})));var o,s=Object(W.b)();if(e.isAnonymous)return l.createElement(Q,null);if(e.chosenCheermote){var c=e.cheerMinimumBits;return l.createElement(te,{minToCheer:c})}return a&&(o=a,Object(q.f)(o))?l.createElement(Be.a,{offer:a,channelID:e.channelID||"",trackingID:e.trackingID,checkoutID:e.checkoutID,trackBitsCardInteraction:e.trackBitsCardInteraction,onPromoBuyClose:e.onPromoBuyClose,isBitsCard:!0}):t&&(i===R.b.On||i===R.b.StaffOnly&&e.isStaff)?l.createElement(ye,{sponsorCampaign:t}):r===R.b.On?l.createElement(X,{onClickHelp:e.showHelp}):s?l.createElement(s.intro,{onClickHelp:e.showHelp}):l.createElement(K,{onClickHelp:e.showHelp})};function Ne(e){var t=null;return e.orderedActions.forEach((function(e){e.campaign&&(t=e.campaign)})),t}function we(e){var t="";return e.orderedActions.forEach((function(e){e.campaign&&(t=e.prefix)})),t}var Ae,xe=n("XDQu"),Ie=n("TSYQ");n("ZfCj");!function(e){e.Placeholder="placeholder"}(Ae||(Ae={}));var De=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleCheermoteHover=function(e){var n=e.currentTarget.getAttribute("data-key");n&&t.props.onHover&&t.props.onHover(n)},t.handleCheermoteUnhover=function(){t.props.onHoverLeave&&t.props.onHoverLeave()},t.handleCheermoteClick=function(e){var n=e.currentTarget.getAttribute("data-key");n&&t.props.onClick&&t.props.onClick(n)},t}return Object(o.__extends)(t,e),t.prototype.render=function(){return this.props.cheermote&&this.props.cheermote.key?l.createElement("li",{className:Ie("cheermote-button",this.props.className)},l.createElement("button",{className:"cheermote-button__button","data-key":this.props.cheermote.key,onMouseEnter:this.handleCheermoteHover,onMouseLeave:this.handleCheermoteUnhover,onClick:this.handleCheermoteClick,"data-a-target":"cheermote-"+this.props.cheermote.key.replace(":","")},l.createElement("img",{alt:this.props.cheermote.key,src:this.props.darkModeEnabled?this.props.cheermote.imgSrcDark:this.props.cheermote.imgSrc})),this.props.children):l.createElement("li",{"data-test-selector":Ae.Placeholder},l.createElement("button",{className:"cheermote-button__button",disabled:!0},l.createElement("div",{className:"cheermote-button__placeholder"})))},t}(l.PureComponent);var Te,je=Object(r.b)((function(e){return{darkModeEnabled:Object(xe.a)(e)===D.a.Dark}}))(De);!function(e){e.MinBitsAmountDisclaimer="min-bits-amount-disclaimer"}(Te||(Te={}));var _e=["cheer","shamrock","frankerz","party"],Fe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.makeCheermoteButtons=function(e){var n=t.props.bitsConfig.indexedActions[e.toLowerCase()];return t.makeCheermoteButton(n)},t.makeCheermoteButton=function(e){if(e){var n={key:e.prefix,imgSrc:e.getImage("light","static",j.l,2),imgSrcDark:e.getImage("dark","static",j.l,2)};return l.createElement(je,{key:n.key,cheermote:n,onClick:t.props.onCheermoteClick})}},t}return Object(o.__extends)(t,e),t.prototype.render=function(){var e=this,t=_e.map(this.makeCheermoteButtons),n=this.props.bitsConfig.orderedActions.find((function(e){return e.type===b.W.CUSTOM}));return n&&(t[1]=this.makeCheermoteButton(n)),l.createElement(S.a,{className:"first-cheer-builder",display:A.h.Flex,flexDirection:A.i.Column,padding:{top:3},justifyContent:A.m.Between},l.createElement(S.a,{display:A.h.Flex,flexDirection:A.i.Column,textAlign:A.q.Center},l.createElement(x.a,{bold:!0,type:x.e.H4},Object(d.d)("Support your streamer with Bits","FirstCheerPrefixSelector")),l.createElement(S.a,{padding:{x:4,top:.5},textAlign:A.q.Left},l.createElement(x.a,{type:x.e.Span},Object(d.d)("Twitch rewards streamers when you use Bits. Send {channelName} some love! First select a cheermote.",{channelName:this.props.channelName},"FirstCheerPrefixSelector"))),!this.props.canCheerInChannel&&l.createElement(S.a,{padding:{top:1}},l.createElement(x.a,{"data-test-selector":Te.MinBitsAmountDisclaimer,type:x.e.Span,italic:!0},Object(d.d)("{channelName} requires <x:bitsAmount></x:bitsAmount> to cheer in this channel",{channelName:this.props.channelName,"x:bitsAmount":function(){return l.createElement(T.a,{count:e.props.minCheerAmount,bitsConfig:e.props.bitsConfig,withImage:!1,withText:!0})}},"FirstCheerPrefixSelector")))),l.createElement(G.a,{display:A.h.Flex,flexDirection:A.i.Row,justifyContent:A.m.Center},l.createElement("ol",null,t)),l.createElement(S.a,{padding:{x:2,bottom:.5},fullWidth:!0},l.createElement(_.a,{"data-a-target":"bits-card-back-button",type:_.d.Text,fullWidth:!0,onClick:this.props.onShowAllCheermotes},Object(d.d)("Show All Cheermotes","FirstCheerPrefixSelector"))))},t}(l.PureComponent),Ue=n("8/mp"),Me=(n("ECxT"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleCheermoteHover=function(e){var n=e.currentTarget.getAttribute("data-key");n&&t.props.onHover(n)},t.handleCheermoteUnhover=function(){t.props.onHoverLeave()},t.handleCheermoteClick=function(e){var n=e.currentTarget.getAttribute("data-key");n&&t.props.onClick(n)},t}return Object(o.__extends)(t,e),t.prototype.render=function(){var e=this,t=this.props.bitsConfig.indexedActions[this.props.chosenCheermote.toLowerCase()],n=this.props.isAnonymous&&Object(de.e)(this.props.chosenCheermote),i=t.orderedTiers.filter((function(e){return e.canShowInBitsCard||n})).map((function(e){return{imgSrc:t.getImage("light","static",e.bits,2),imgSrcDark:t.getImage("dark","static",e.bits,2),key:t.prefix+":"+e.bits}})).reverse().map((function(t,n){return t&&t.key?l.createElement("li",{key:t.key,className:"cheermote-tier-selector__cheermote"},l.createElement("button",{className:"cheermote-tier-selector__item-button","data-key":t.key,onMouseEnter:e.handleCheermoteHover,onMouseLeave:e.handleCheermoteUnhover,onClick:e.handleCheermoteClick,"data-a-target":"cheermote-"+t.key.replace(":","")},l.createElement("img",{alt:t.key,src:e.props.darkModeEnabled?t.imgSrcDark:t.imgSrc})),l.createElement($.a,{prefix:"",amount:+t.key.split(":")[1],showImage:!1,showAmount:!0,size:$.b.Small})):l.createElement("li",{key:"null-cheermote-"+n},l.createElement("button",{className:"cheermote-tier-selector__item-button",disabled:!0},l.createElement("div",{className:"cheermote-tier-selector__placeholder"})))})),r=l.createElement(S.a,{padding:{right:2},fullWidth:!0,className:"cheermote-tier-selector__back-button",visibility:this.props.isAnonymous?A.s.Hidden:A.s.Visible},l.createElement(_.a,{"data-a-target":"bits-card-back-button",type:_.d.Text,fullWidth:!0,onClick:this.props.onClose},Object(d.d)("Show All Cheermotes","CheermoteCarousel"))),a=l.createElement(G.a,{className:"cheermote-tier-selector__cheermotes",display:A.h.Flex,flexWrap:A.j.Wrap,flexDirection:A.i.Row,justifyContent:A.m.Between,alignItems:A.b.End,padding:{bottom:1}},l.createElement("ul",null,i,r));return l.createElement(S.a,{flexGrow:1,overflow:A.n.Hidden,className:"cheermote-tier-selector"},a)},t}(l.PureComponent));var Le,Pe=Object(r.b)((function(e){return{darkModeEnabled:Object(xe.a)(e)===D.a.Dark}}))(Me);n("8BsE");!function(e){e.MinBitsChannelDisclaimer="min-bits-channel-disclaimer",e.BitsAmountCheering="bits-amount-cheering"}(Le||(Le={}));var He=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t.unhoverTimeout=0,t.onClickTier=function(e){t.props.onClickCheermote(e.split(":").join(""))},t.onHover=function(e){clearTimeout(t.unhoverTimeout);var n=e.split(":");n.length<2||t.setState({hoveredTier:parseInt(n[1],10),hoveredCheermote:n[0]})},t.onHoverLeave=function(){t.unhoverTimeout=setTimeout(t.clearHovered,500)},t.clearHovered=function(){t.setState({hoveredTier:void 0,hoveredCheermote:void 0})},t}return Object(o.__extends)(t,e),t.prototype.render=function(){var e=this,t=Object(q.a)(this.props.currentCheers),n=t.total,i=t.bonus,r=t.smallestCheermote,a=t.largestCheermote,o=null;if(this.props.currentCheers&&1===this.props.currentCheers.length){var s=this.props.currentCheers[0].alt;s&&(o=l.createElement(S.a,{padding:{top:1}},l.createElement($.a,{prefix:s,amount:n>j.o?j.o:n,showImage:!0,showAmount:!0})))}else this.props.currentCheers&&(o=l.createElement(S.a,{margin:{y:1}},l.createElement(Ue.b,{className:"first-cheer-tier-selector__scroll-container"},l.createElement(ie,{prefixes:this.props.currentCheers}))));var c=Object(d.d)("Back","FirstCheerTierSelector"),u=!(!this.state.hoveredCheermote||!this.state.hoveredTier),m=this.props.canCheerInChannel&&this.props.currentCheers.length>0,p=null;this.props.currentCheers&&this.props.sponsoredCampaign&&this.props.sponsoredCampaignPrefix&&(p=l.createElement(ce,{prefixes:this.props.currentCheers,sponsoredCampaign:this.props.sponsoredCampaign,sponsoredCampaignPrefix:this.props.sponsoredCampaignPrefix,sponsoredBitsBonus:i}));var h=pe({smallestCheermote:r,bitsSendErrorCode:this.props.bitsSendErrorCode,bitsSendHasError:this.props.bitsSendHasError,minPerEmote:this.props.minPerEmote,chatMessage:this.props.chatMessage,onValidationError:this.props.onCheerInvalid}),f=he({largestCheermote:a,bitsSendErrorCode:this.props.bitsSendErrorCode,bitsSendHasError:this.props.bitsSendHasError,amount:n,minToCheer:this.props.minCheerAmount,bitsConfig:this.props.bitsConfig,bitsBalance:this.props.bitsBalance,chatMessage:this.props.chatMessage,onValidationError:this.props.onCheerInvalid});return h||f||this.props.onCheerInvalid(void 0),l.createElement(S.a,{display:A.h.Flex,flexDirection:A.i.Column,justifyContent:A.m.Between},l.createElement(S.a,{padding:{top:3},display:A.h.Flex,flexDirection:A.i.Column,textAlign:A.q.Center,borderBottom:!0},l.createElement(S.a,{position:A.o.Absolute,attachLeft:!0,attachTop:!0,padding:{top:.5}},l.createElement(_.a,{"aria-label":c,onClick:this.props.onBack,type:_.d.Text,icon:z.a.AngleLeft},c)),l.createElement(x.a,{type:x.e.H4,bold:!0},Object(d.d)("Pick cheermote tier","FirstCheerTierSelector")),l.createElement(S.a,{padding:{x:4,top:.5},textAlign:A.q.Left},l.createElement(x.a,null,Object(d.d)("Now, select how many Bits to use and send your message in chat.","FirstCheerTierSelector"))),u&&l.createElement(ee,{hideHeadline:!0,prefix:this.state.hoveredCheermote,tier:this.state.hoveredTier,onClickHelp:this.props.showHelp}),!u&&l.createElement(l.Fragment,null,m&&!h&&l.createElement(l.Fragment,null,o,l.createElement(S.a,{padding:{bottom:.5}},l.createElement(x.a,{"data-test-selector":Le.BitsAmountCheering},Object(d.d)("You're cheering <x:bitsAmount></x:bitsAmount>",{"x:bitsAmount":function(){return l.createElement(T.a,{count:n,bitsConfig:e.props.bitsConfig,withImage:!1,withText:!0})}},"FirstCheerTierSelector")))),m&&!f&&p&&l.createElement(S.a,{padding:{top:1}},p),m&&f&&l.createElement(S.a,{padding:{top:1},color:A.f.Error},f),m&&h&&l.createElement(S.a,{padding:{top:3,x:3}},h),!m&&l.createElement(S.a,{padding:{y:3}},l.createElement(x.a,{"data-test-selector":Le.MinBitsChannelDisclaimer,type:x.e.Span,italic:!0},Object(d.d)("{channelName} requires <x:bitsAmount></x:bitsAmount> to cheer in this channel",{channelName:this.props.channelName,"x:bitsAmount":function(){return l.createElement(T.a,{count:e.props.minCheerAmount,bitsConfig:e.props.bitsConfig,withImage:!1,withText:!0})}},"FirstCheerTierSelector"))))),l.createElement(Pe,{bitsConfig:this.props.bitsConfig,chosenCheermote:this.props.chosenCheermote,onClose:this.props.onClose,onClick:this.onClickTier,onHover:this.onHover,onHoverLeave:this.onHoverLeave,isAnonymous:this.props.isAnonymous}))},t}(l.PureComponent),Re=n("r/lI"),We=(n("KO0n"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t.onTierSelectionExit=function(){t.setState({selectedCheermote:void 0})},t.onCheermoteClick=function(e){t.setState({selectedCheermote:e})},t}return Object(o.__extends)(t,e),t.prototype.render=function(){if(this.props.data.loading&&!this.props.data.error)return l.createElement(H.a,null);if(this.props.data.error)return l.createElement(I,null);var e=this.props.data.user&&this.props.data.user.cheer&&this.props.data.user.cheer.settings.cheerMinimumBits,t=this.props.data.user&&this.props.data.user.cheer&&this.props.data.user.cheer.settings.emoteMinimumBits,n=!!(this.props.bitsBalance&&null!==e&&this.props.bitsBalance>=e),i=Ne(this.props.bitsConfig),r=we(this.props.bitsConfig);return l.createElement(N.a,{onUserClose:this.props.handleExit},this.state.selectedCheermote&&l.createElement(He,{chosenCheermote:this.state.selectedCheermote,bitsConfig:this.props.bitsConfig,canCheerInChannel:n,minCheerAmount:e||1,minPerEmote:t||1,channelName:this.props.channelLogin,onClose:this.props.handleExit,currentCheers:this.props.currentCheers,bitsSendErrorCode:this.props.bitsSendErrorCode,bitsSendHasError:this.props.bitsSendHasError,chatMessage:this.props.chatMessage,sponsoredCampaign:i,sponsoredCampaignPrefix:r,bitsBalance:this.props.bitsBalance||0,onClickCheermote:this.props.onClickCheermote,onBack:this.onTierSelectionExit,onCheerInvalid:this.props.onCheerInvalid,isAnonymous:this.props.isAnonymous,showHelp:this.props.showHelp}),!this.state.selectedCheermote&&l.createElement(Fe,{bitsConfig:this.props.bitsConfig,canCheerInChannel:n,minCheerAmount:e||1,channelName:this.props.channelLogin,onCheermoteClick:this.onCheermoteClick,onShowAllCheermotes:this.props.handleExit}),l.createElement(S.a,{fullWidth:!0,className:"first-cheer-builder__footer"},l.createElement(P,{channelID:this.props.channelID,bitsConfig:this.props.bitsConfig,balance:this.props.bitsBalance||0,showBuyButton:!n,onClickGetBits:this.props.handleClickBuy,isAnonymous:this.props.isAnonymous})))},t}(l.PureComponent)),qe=Object(c.d)(Object(u.a)(Re,{options:function(e){return{variables:{channelLogin:e.channelLogin}}}}))(We),Ve=function(e){return e.event,l.createElement(P,{channelID:e.channelID,bitsConfig:e.bitsConfig,onClickGetBits:e.onClickGetBits,balance:e.balance,isAnonymous:!1})},ze=function(e){return l.createElement(S.a,{flexGrow:1},l.createElement(S.a,{className:"undo-prompt__footer",padding:1,display:A.h.Flex,justifyContent:A.m.Between},l.createElement(_.a,{onClick:e.onCancel||void 0,type:_.d.Secondary,overlay:!0,"data-test-selector":"cancel-button"},Object(d.d)("Cancel","Bits--UndoPrompt")),l.createElement(_.a,{onClick:e.onConfirm||void 0,"data-test-selector":"confirm-button"},Object(d.d)("Send","Bits--UndoPrompt"))),l.createElement(Ee.a,{animationDirection:Ee.b.Down,size:Ee.c.ExtraSmall,animationDuration:j.t.UNDO_PROMPT_DURATION/1e3}))},Ge=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.__extends)(t,e),t.prototype.render=function(){return this.props.isSending?this.props.totalBits>=j.q?l.createElement(ze,{onCancel:this.props.onCancelSend,onConfirm:this.props.onConfirmSend}):null:this.props.event?l.createElement(Ve,{channelID:this.props.channelID,event:this.props.event,bitsConfig:this.props.bitsConfig,onClickGetBits:this.props.handleClickBuy,balance:this.props.bitsBalance}):l.createElement(P,{channelID:this.props.channelID,bitsConfig:this.props.bitsConfig,onClickGetBits:this.props.handleClickBuy,balance:this.props.bitsBalance,isAnonymous:this.props.isAnonymous})},t}(l.PureComponent),Ye=n("cw0r"),Qe=n("oBNK"),Xe=n("F+KF"),Ze=(n("AcdH"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleCheermoteHover=function(e){var n=e.currentTarget.getAttribute("data-key");n&&t.props.onHover(n)},t.handleCheermoteUnhover=function(){t.props.onHoverLeave()},t.handleCheermoteClick=function(e){var n=e.currentTarget.getAttribute("data-key");n&&t.props.onClick(n)},t}return Object(o.__extends)(t,e),t.prototype.render=function(){var e=this,t=this.props.bitsConfig.orderedActions.filter((function(e){return e.type!==b.W.ANONYMOUS&&e.type!==b.W.THIRD_PARTY&&e.type!==b.W.DISPLAY_ONLY})).map((function(e){return{imgSrc:e.getImage("light","static",j.l,2),imgSrcDark:e.getImage("dark","static",j.l,2),key:e.prefix}})).map((function(t,n){return t&&t.key?l.createElement(G.a,{key:t.key,margin:{bottom:1}},l.createElement("li",{className:"cheermote-prefix-selector__cheermote"},l.createElement("button",{className:"cheermote-prefix-selector__item-button","data-key":t.key,onMouseEnter:e.handleCheermoteHover,onMouseLeave:e.handleCheermoteUnhover,onClick:e.handleCheermoteClick,"data-a-target":"cheermote-"+t.key.replace(":","")},l.createElement("img",{alt:t.key,src:e.props.darkModeEnabled?t.imgSrcDark:t.imgSrc})))):l.createElement("li",{key:"null-cheermote-"+n},l.createElement("button",{className:"cheermote-prefix-selector__item-button",disabled:!0},l.createElement("div",{className:"cheermote-prefix-selector__placeholder"})))})),n=l.createElement(G.a,{className:"cheermote-prefix-selector__cheermotes",display:A.h.Flex,flexWrap:A.j.Wrap,flexDirection:A.i.Row,justifyContent:A.m.Start,alignItems:A.b.End,padding:{bottom:1}},l.createElement("ul",null,t));return l.createElement(S.a,{flexGrow:1,overflow:A.n.Hidden,className:"cheermote-prefix-selector"},l.createElement(Ue.b,null,n))},t}(l.PureComponent));var Je=Object(r.b)((function(e){return{darkModeEnabled:Object(xe.a)(e)===D.a.Dark}}))(Ze),Ke=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onAnonymousCheckBoxChange=function(e){t.props.handleAnonymousToggle(e.currentTarget.checked)},t}return Object(o.__extends)(t,e),t.prototype.render=function(){if(this.props.helpRequested&&!this.props.currentCheers.length)return null;var e=null;return e=this.props.isAnonymous?l.createElement(Pe,{bitsConfig:this.props.bitsConfig,chosenCheermote:j.b,onHover:this.props.handleTierHover,onHoverLeave:this.props.handleUnhover,onClick:this.props.handleTierClick,onClose:this.props.clearChosenCheermote,isAnonymous:this.props.isAnonymous}):this.props.chosenCheermote?l.createElement(Pe,{bitsConfig:this.props.bitsConfig,chosenCheermote:this.props.chosenCheermote,onHover:this.props.handleTierHover,onHoverLeave:this.props.handleUnhover,onClick:this.props.handleTierClick,onClose:this.props.clearChosenCheermote,isAnonymous:this.props.isAnonymous}):l.createElement(Je,{bitsConfig:this.props.bitsConfig,onHover:this.props.handleCheermoteHover,onHoverLeave:this.props.handleUnhover,onClick:this.props.handleCheermoteClick}),l.createElement(S.a,{fullWidth:!0},!this.props.event&&l.createElement(Ye.a,{name:"bits_project_marley"},l.createElement(S.a,{padding:{left:1,top:1}},l.createElement(Qe.a,{label:Object(d.d)("Your name will appear as {anAnonymousCheerer} and custom messaging will be turned off.",{anAnonymousCheerer:j.c},"CheermotePrefixSelector"),direction:Qe.c.Bottom,align:Qe.b.Left,width:275},l.createElement(Xe.a,{checked:this.props.isAnonymous,onChange:this.onAnonymousCheckBoxChange,label:Object(d.d)("Cheer Anonymously","CheermotePrefixSelector")})))),e)},t}(l.PureComponent),$e=n("edgk"),et=n("UajW"),tt=(n("c+1r"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={chosenCheermote:null,hoveredCheermote:null,hoveredTier:0,totalBits:0,bonusBits:0,largestCheermote:0,smallestCheermote:0},t.unhoverTimeout=0,t.handleTierHover=function(e){clearTimeout(t.unhoverTimeout);var n=e.split(":");n.length<2||(t.setState({hoveredTier:+n[1],hoveredCheermote:n[0]}),t.props.trackBitsCardInteraction(B.c.PreviewEmote,{actionType:B.a.Hover,emoteType:n[0],emoteLevel:+n[1]}))},t.handleUnhover=function(){t.unhoverTimeout=setTimeout(t.clearHovered,500)},t.clearHovered=function(){t.setState({hoveredTier:0,hoveredCheermote:null})},t.handleTierClick=function(e){t.props.onClickCheermote(e.split(":").join(""))},t.handleCheermoteHover=function(e){clearTimeout(t.unhoverTimeout),t.setState({hoveredCheermote:e,hoveredTier:0}),t.props.trackBitsCardInteraction(B.c.PreviewEmote,{actionType:B.a.Hover,emoteType:e,emoteLevel:100})},t.handleCheermoteClick=function(e){t.setState({chosenCheermote:e,hoveredCheermote:null,hoveredTier:0})},t.clearChosenCheermote=function(){t.setState({chosenCheermote:null,hoveredCheermote:null,hoveredTier:0})},t.onPromoBuyClose=function(e){Object($e.a)(e,(function(){t.props.data&&t.props.data.refetch()}))},t}return Object(o.__extends)(t,e),t.getDerivedStateFromProps=function(e,t){var n=t.chosenCheermote||t.hoveredCheermote||t.hoveredTier,i=e.visible||!!e.currentCheers.length,r=Object(o.__assign)({},t);n&&!i&&(r=Object(o.__assign)(Object(o.__assign)({},r),{chosenCheermote:null,hoveredCheermote:null,hoveredTier:0}));var a=Object(q.a)(e.currentCheers),s=a.total,l=a.bonus,c=a.largestCheermote,d=a.smallestCheermote;return s===t.totalBits&&l===t.bonusBits&&c===t.largestCheermote&&d===t.smallestCheermote||(r=Object(o.__assign)(Object(o.__assign)({},r),{totalBits:s,bonusBits:l,largestCheermote:c,smallestCheermote:d})),r},t.prototype.componentDidMount=function(){var e=Object(q.a)(this.props.currentCheers),t=e.total,n=e.bonus,i=e.largestCheermote,r=e.smallestCheermote;this.setState({totalBits:t,bonusBits:n,largestCheermote:i,smallestCheermote:r}),this.props.onMount&&this.props.onMount()},t.prototype.render=function(){var e=this.props,t=e.cheerMessageAutoModded,n=e.visible,i=e.currentCheers,r=e.data,a=e.bitsConfig,o=e.isSending,s=e.helpRequested,c=e.channelID,u=e.showHelp,m=e.isStaff,p=e.bitsSendErrorCode,h=e.bitsSendHasError,f=e.handleClickBuy,b=e.onCancelSend,g=e.onConfirmSend,C=e.chatMessage;if(t||!n&&!i.length)return null;if(!r.user||r.loading)return l.createElement(H.a,null);if(r.error||!a)return l.createElement(I,null);if(!r.user.cheer)return null;var v,k=this.props.helpRequested&&!this.props.currentCheers.length,E=null;r.user.cheer.settings.event&&(E=r.user.cheer.settings.event.toLowerCase().replace("_","-")),k&&(v=l.createElement(S.a,{position:A.o.Absolute,padding:{left:.5,top:.5},attachLeft:!0,attachTop:!0},l.createElement(_.a,{onClick:this.props.closeHelp,"data-a-target":"bits-card-back-button",icon:z.a.ChatSettingsBack,type:_.d.Text,size:_.b.Small},Object(d.d)("Back","BitsCard"))));var y,B=Ie("t-bits-card__contents",{"t-bits-card__contents--anonymous":this.props.isAnonymous});return r.currentUser&&r.currentUser.bitsOffers&&r.currentUser.autoRefill&&r.currentUser.autoRefill.profiles[0]&&(y=r.currentUser.autoRefill.profiles[0]),l.createElement(l.Fragment,null,!o&&v,l.createElement(S.a,{className:B,display:A.h.Flex,flexGrow:0,flexDirection:A.i.Column,alignContent:A.a.Stretch,textAlign:A.q.Center,borderBottom:!o,borderRadius:{topLeft:A.e.Large,topRight:A.e.Large},fullWidth:!0},l.createElement(Oe,{bitsBalance:r.currentUser&&r.currentUser.bitsBalance||0,bitsConfig:a,cheerMinimumBits:r.user.cheer.settings.cheerMinimumBits,chosenCheermote:this.state.chosenCheermote,currentCheers:i,displayName:r.user.displayName||"",emoteMinimumBits:r.user.cheer.settings.emoteMinimumBits,event:E,helpRequested:s,hoveredCheermote:this.state.hoveredCheermote,hoveredTier:this.state.hoveredTier,isSending:o,largestCheermote:this.state.largestCheermote,smallestCheermote:this.state.smallestCheermote,totalBits:this.state.totalBits,bonusBits:this.state.bonusBits,channelID:c,trackingID:this.props.trackingID,checkoutID:this.props.checkoutID,showHelp:u,isStaff:m,isAnonymous:this.props.isAnonymous,bitsSendErrorCode:p,bitsSendHasError:h,chatMessage:C,onCheerInvalid:this.props.onCheerInvalid,bitsOffers:r.currentUser&&r.currentUser.bitsOffers,trackBitsCardInteraction:this.props.trackBitsCardInteraction,onPromoBuyClose:this.onPromoBuyClose,autoRefillThreshold:y&&y.isEnabled&&y.threshold||void 0})),!o&&l.createElement(Ke,{bitsConfig:a,chosenCheermote:this.state.chosenCheermote,currentCheers:i,event:E,helpRequested:s,isAnonymous:this.props.isAnonymous,handleCheermoteClick:this.handleCheermoteClick,handleCheermoteHover:this.handleCheermoteHover,handleTierClick:this.handleTierClick,handleTierHover:this.handleTierHover,handleUnhover:this.handleUnhover,handleAnonymousToggle:this.props.onAnonymousToggle,clearChosenCheermote:this.clearChosenCheermote}),l.createElement(S.a,{className:"t-bits-card__footer",fullWidth:!0,display:A.h.Flex,borderRadius:{bottomLeft:A.e.Large,bottomRight:A.e.Large}},l.createElement(Ge,{bitsBalance:r.currentUser&&r.currentUser.bitsBalance||0,channelID:this.props.channelID,bitsConfig:a,event:E,isSending:o,totalBits:this.state.totalBits,handleClickBuy:f,onCancelSend:b,onConfirmSend:g,isAnonymous:this.props.isAnonymous})))},t}(l.Component)),nt=Object(c.d)(Object(m.a)((function(e){return{query:et,variables:{name:e.channelID},topic:Object(f.h)(e.channelID||""),type:p.PubsubMessageType.BitsChannelSettingsEvent,mutator:function(e,t){return t.user&&t.user.cheer?(void 0!==e.updates.minimum_bits&&(t=s(t,(function(e){return e.user.cheer.settings.cheerMinimumBits}),(function(){return e.updates.minimum_bits}))),void 0!==e.updates.minimum_bits_emote&&(t=s(t,(function(e){return e.user.cheer.settings.emoteMinimumBits}),(function(){return e.updates.minimum_bits_emote}))),t):t},skip:!e.channelID}})),Object(u.a)(et,{name:"data",skip:function(e){return!e.channelID},options:function(e){return{variables:{name:e.channelID||"",withCheerBombEventEnabled:!1},fetchPolicy:"cache-and-network"}}}))(tt),it=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.__extends)(t,e),t.prototype.render=function(){return l.createElement(S.a,{padding:1,textAlign:A.q.Center},l.createElement(x.a,{color:A.f.Error,italic:!0},Object(d.d)("You cannot Cheer in your own channel.","BitsCard")))},t}(l.PureComponent),rt=n("bBAb"),at=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={helpRequested:!1,buyingBits:!1,backTargetsIntro:!1},t.lastRefetchTime=0,t.showHelp=function(e){e.preventDefault(),t.setState({helpRequested:!0}),t.props.trackBitsCardInteraction(B.c.NewUserHelpRequested)},t.closeHelp=function(){return t.setState({helpRequested:!1})},t.handleClickBuy=function(){t.setState({buyingBits:!0}),t.props.trackBitsCardInteraction(B.c.BuyMain)},t.handleCloseBuy=function(){t.setState({buyingBits:!1}),t.props.trackBitsCardInteraction(B.c.CloseBuy)},t.handleSkip=function(){t.closeHelp(),t.mutateFirstCheerTutorialState({hasAbandoned:!1,hasSkipped:!0}),t.props.trackBitsCardInteraction(B.c.NewUserSkipTutorial)},t.handleCloseIntro=function(){t.closeHelp(),t.props.currentCheers.length?t.mutateFirstCheerTutorialState({hasAbandoned:!1,hasSkipped:!0}):t.props.onUserClose(),t.props.trackBitsCardInteraction(B.c.NewUserCloseTutorial)},t.handleClickFirstTimePurchaseDiscount=function(){t.setState({buyingBits:!0,helpRequested:!1,backTargetsIntro:!0}),t.mutateFirstCheerTutorialState({hasAbandoned:!0,hasSkipped:!1}),t.props.trackBitsCardInteraction(B.c.NewUserFirstTimePurchaseDiscountClick)},t.handleBackFromBuy=function(){t.setState({helpRequested:t.state.backTargetsIntro,buyingBits:!1})},t.onMountBitsCardMain=function(){t.setState({backTargetsIntro:!1})},t.mutateFirstCheerTutorialState=function(e){return Object(o.__awaiter)(t,void 0,void 0,(function(){var t,n,i,r,a,s,l;return Object(o.__generator)(this,(function(c){switch(c.label){case 0:if(!(t=this.props.data&&this.props.data.currentUser))return[3,4];n=t.bitsUserSettings,i=t.id,r=n&&n.firstCheerTutorial||{hasAbandoned:!1,hasSkipped:!1},a={hasAbandoned:e.hasAbandoned,hasSkipped:e.hasSkipped},s={setBitsUserSettings:{__typename:"SetBitsUserSettingsPayload",currentUser:{__typename:"User",id:i,bitsUserSettings:{__typename:"BitsUserSettings",firstCheerTutorial:Object(o.__assign)(Object(o.__assign)({__typename:"FirstCheerTutorial"},r),a)}}}},c.label=1;case 1:return c.trys.push([1,3,,4]),[4,this.props.setBitsUserSettings(Object(h.b)({abandonedFirstCheerTutorial:e.hasAbandoned,skippedFirstCheerTutorial:e.hasSkipped},s))];case 2:return c.sent(),[3,4];case 3:return l=c.sent(),Object(g.d)()?d.k.warn(l,"Failed to set bits user settings."):d.k.errorAndReport(l,"Failed to set bits user settings."),[3,4];case 4:return[2]}}))}))},t}return Object(o.__extends)(t,e),t.getDerivedStateFromProps=function(e,t){var n=e.visible||!!e.currentCheers.length;return t.buyingBits?Object(o.__assign)(Object(o.__assign)({},t),{buyingBits:!(t.buyingBits&&!n)}):t},t.prototype.componentDidUpdate=function(e){var t=e.visible||!!e.currentCheers.length,n=this.props.visible||!!this.props.currentCheers.length;if(!t&&n){var i=Date.now();i-this.lastRefetchTime>1e3&&e.data&&this.props.data&&!this.props.data.loading&&(this.lastRefetchTime=i,this.props.data.refetch())}e.visible!==this.props.visible&&this.props.setBitsCardOpenState(this.props.visible)},t.prototype.render=function(){if(this.props.cheerMessageAutoModded||!this.props.visible&&!this.props.currentCheers.length)return null;if(!this.props.data||this.props.data.loading)return l.createElement(N.a,{onUserClose:this.props.onUserClose},l.createElement(H.a,null));if(this.props.data.error||!this.props.bitsConfig)return l.createElement(N.a,{onUserClose:this.props.onUserClose},l.createElement(I,null));if(this.props.data.currentUser&&this.props.data.currentUser.login===this.props.channelLogin)return l.createElement(N.a,{onUserClose:this.props.onUserClose},l.createElement(it,null));var e=this.props.data&&this.props.data.currentUser,t=e&&e.bitsUserState,n=e&&e.bitsUserSettings;if(Object(y.a)(t)){if(this.state.buyingBits)return l.createElement(N.a,{onUserClose:this.handleCloseBuy,closeDataATarget:"bits-buy-card-close-button"},l.createElement(C.a,{channelLogin:this.props.channelLogin,trackingID:this.props.trackingID,checkoutID:this.props.checkoutID,closeAllBits:this.props.onUserClose,onClose:this.handleCloseBuy,onBack:this.handleBackFromBuy,trackBitsCardInteraction:this.props.trackBitsCardInteraction,location:B.d.ChatTooltip,shouldShowNewUserCheerUX:!0}));if(Object(y.d)(t,n)||Object(y.a)(t)&&this.state.helpRequested)return l.createElement(N.a,{onUserClose:this.handleCloseIntro,closeDataATarget:"bits-intro-close-button"},l.createElement(S.a,{padding:1},l.createElement(w.a,{onUserSkip:this.handleSkip,onUserClickFirstTimePurchaseDiscount:this.handleClickFirstTimePurchaseDiscount,trackBitsCardInteraction:this.props.trackBitsCardInteraction})))}return this.state.buyingBits?l.createElement(N.a,{onUserClose:this.handleCloseBuy,closeDataATarget:"bits-buy-card-close-button"},l.createElement(C.a,{channelLogin:this.props.channelLogin,trackingID:this.props.trackingID,checkoutID:this.props.checkoutID,closeAllBits:this.props.onUserClose,onClose:this.handleCloseBuy,trackBitsCardInteraction:this.props.trackBitsCardInteraction,location:B.d.ChatTooltip,size:v.b.Scrollview})):Object(y.b)(this.props.isStaff,t,n)?l.createElement(qe,{channelID:this.props.channelID,bitsConfig:this.props.bitsConfig,channelLogin:this.props.channelLogin,currentCheers:this.props.currentCheers,bitsSendHasError:this.props.bitsSendHasError,bitsSendErrorCode:this.props.bitsSendErrorCode,chatMessage:this.props.chatMessage,onClickCheermote:this.props.onClickCheermote,bitsBalance:e&&e.bitsBalance,handleClickBuy:this.handleClickBuy,handleExit:this.handleSkip,onCheerInvalid:this.props.onCheerInvalid,isAnonymous:!1,showHelp:this.showHelp}):l.createElement(N.a,{onUserClose:this.props.currentCheers.length?void 0:this.props.onUserClose},l.createElement(nt,{onMount:this.onMountBitsCardMain,bitsConfig:this.props.bitsConfig,channelID:this.props.channelID,trackingID:this.props.trackingID,checkoutID:this.props.checkoutID,channelLogin:this.props.channelLogin,cheerMessageAutoModded:this.props.cheerMessageAutoModded,visible:this.props.visible,currentCheers:this.props.currentCheers,isSending:this.props.isSending,isStaff:this.props.isStaff,isAnonymous:this.props.isAnonymous,onClickCheermote:this.props.onClickCheermote,onCancelSend:this.props.onCancelSend,onConfirmSend:this.props.onConfirmSend,trackBitsCardInteraction:this.props.trackBitsCardInteraction,bitsSendErrorCode:this.props.bitsSendErrorCode,bitsSendHasError:this.props.bitsSendHasError,helpRequested:this.state.helpRequested,showHelp:this.showHelp,closeHelp:this.closeHelp,handleClickBuy:this.handleClickBuy,chatMessage:this.props.chatMessage,onCheerInvalid:this.props.onCheerInvalid,onAnonymousToggle:this.props.onAnonymousToggle}))},t}(l.Component);var ot=Object(c.d)(Object(u.a)(O,{name:"data",skip:function(e){return!e.channelID}}),Object(u.a)(E,{name:"setBitsUserSettings"}),Object(m.a)((function(e){return{query:O,topic:e.user?Object(f.Z)(e.user.id):"",type:p.PubsubMessageType.UserBitsFirstPurchase,skip:!e.user,mutator:function(t,n){return!n.currentUser||t.message_type!==k.b.FirstPurchase||e.user&&t.data.user_id!==e.user.id?n:(n.currentUser.bitsUserState===b.x.NEW_USER&&(n=s(n,(function(e){return e.currentUser.bitsUserState}),(function(){return b.x.ACQUIRED}))),n)}}})),Object(rt.b)((function(e){return{bitsConfig:e.bitsConfig,setBitsCardOpenState:e.setBitsCardOpenState}})))(at);var st=Object(r.b)((function(e){return{user:Object(a.e)(e),isStaff:Object(a.g)(e)}}))(ot)},u0cu:function(e,t,n){},wmIm:function(e,t,n){var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"bitsOffer"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"BitsOffer"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"BitsAdOffer"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"bitsAdOffer"},directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"BitsBundleOffer"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"bitsBundleOffer"},directives:[]}]}}]}}],loc:{start:0,end:256}};i.loc.source={body:'#import "twilight/features/bits/models/bits-bundle-offer-fragment.gql"\n#import "twilight/features/bits/models/bits-ad-offer-fragment.gql"\nfragment bitsOffer on BitsOffer {\n... on BitsAdOffer{\n...bitsAdOffer\n}\n... on BitsBundleOffer {\n...bitsBundleOffer\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};function a(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!r[t]&&(r[t]=!0,!0)}))}i.definitions=i.definitions.concat(a(n("UqM8").definitions)),i.definitions=i.definitions.concat(a(n("ys9W").definitions)),e.exports=i},wtKP:function(e,t,n){},yGGv:function(e,t,n){},ys9W:function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"bitsAdOffer"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"BitsAdOffer"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bits"},arguments:[],directives:[]}]}}],loc:{start:0,end:52}};n.loc.source={body:"fragment bitsAdOffer on BitsAdOffer {\nid\ntype\nbits\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"zmH+":function(e,t,n){},zmay:function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Bits_BuyCard_Offers"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"withChannel"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"isLoggedIn"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"bitsOffers"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"skip"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"isLoggedIn"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"bitsOffer"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"isLoggedIn"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"idSHA1"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bitsBalance"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bitsOffers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"bitsOffer"},directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}}}],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"withChannel"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cheer"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"settings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cheerMinimumBits"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:424}};i.loc.source={body:'#import "twilight/features/bits/models/bits-offer-fragment.gql"\nquery Bits_BuyCard_Offers($withChannel: Boolean! $isLoggedIn: Boolean! $channelLogin: String!) {\nbitsOffers @skip(if: $isLoggedIn) {\n...bitsOffer\n}\ncurrentUser @include(if: $isLoggedIn) {\nid\nidSHA1\nbitsBalance\nbitsOffers {\n...bitsOffer\n}\n}\nuser(login: $channelLogin) @include(if: $withChannel) {\nid\ndisplayName\ncheer {\nid\nsettings {\nid\ncheerMinimumBits\n}\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};i.definitions=i.definitions.concat(n("wmIm").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!r[t]&&(r[t]=!0,!0)})));var a={};function o(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}i.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),a[e.name.value]=t}})),e.exports=i,e.exports.Bits_BuyCard_Offers=function(e,t){var n={kind:e.kind,definitions:[o(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var i=a[t]||new Set,r=new Set,s=new Set;for(i.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){r.has(e)||(r.add(e),(a[e]||new Set).forEach((function(e){s.add(e)})))}))}return r.forEach((function(t){var i=o(e,t);i&&n.definitions.push(i)})),n}(i,"Bits_BuyCard_Offers")},zrSb:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var i,r=n("mrSG"),a=n("q1tI"),o=n("4rCz"),s=n("5zXJ"),l=n("RiD7"),c=n("x1M1"),d=n("OCDW"),u=n("Yegi"),m=n("uq9l"),p=n("p9DJ"),h=n("5e0Q"),f=(n("Y18C"),{themed:!0,dark:{"1x":s.g+"/bits-card/intro/dark/bits-new-user-dark.gif"},light:{"1x":s.g+"/bits-card/intro/light/bits-new-user-light.gif"}});!function(e){e.Heading="bits-card-intro-heading-selector",e.Description="bits-card-intro-description-selector",e.Image="bits-card-intro-image-selector",e.FirstTimePurchase="bits-card-intro-first-time-purchase-selector",e.Skip="bits-card-intro-skip-selector"}(i||(i={}));var b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.trackLearnMore=function(e){t.props.trackBitsCardInteraction(l.c.NewUserLearnMore)},t}return Object(r.__extends)(t,e),t.prototype.render=function(){var e=this.props,t=e.onUserSkip,n=e.onUserClickFirstTimePurchaseDiscount;return a.createElement(d.a,{padding:{left:2,right:2,y:1}},a.createElement(d.a,{display:u.h.Flex,justifyContent:u.m.Center},a.createElement(m.a,{type:m.e.H4,"data-test-selector":i.Heading,bold:!0},Object(o.d)("Join the party with Bits","BitsIntro"))),a.createElement(d.a,{margin:{top:1}},a.createElement(m.a,{type:m.e.P,"data-test-selector":i.Description},Object(o.d)("Celebrate big moments and support your favorite streamers with special animated emotes!","BitsIntro")," ",a.createElement(p.a,{linkTo:"/bits",targetBlank:!0,onClick:this.trackLearnMore},Object(o.d)("Learn more","BitsIntro")))),a.createElement(d.a,{margin:{top:2,bottom:2},display:u.h.Flex,justifyContent:u.m.Center,className:"bits-card-intro__gif-wrapper"},a.createElement(c.a,{sources:f,"data-test-selector":i.Image})),a.createElement(h.a,{onClick:n,"data-test-selector":i.FirstTimePurchase,fullWidth:!0},Object(o.d)("First-Time Purchaser Discount","BitsIntro")),t&&a.createElement(h.a,{onClick:t,type:h.d.Text,"data-test-selector":i.Skip,fullWidth:!0},Object(o.d)("Skip","BitsIntro")))},t}(a.PureComponent)}}]);